<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nuswantara OS - Ultimate</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Segoe+UI:wght@400;600&family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* DARK MODE (DEFAULT) */
            --bg: #050505;
            --card-bg: #111;
            --gold: #d4af37;
            --green: #27ae60;
            --blue: #2980b9;
            --red: #c0392b;
            --purple: #9b59b6;
            --cyan: #00ffcc;
            --text: #e0e0e0;
            --border: #333;
            --shadow: rgba(0,0,0,0.5);
            --taskbar-h: 50px; 
        }

        /* LIGHT MODE VARIABLES */
        body.light-mode {
            --bg: #e0e0e0;
            --card-bg: #ffffff;
            --gold: #b8860b;
            --green: #2ecc71;
            --blue: #3498db;
            --red: #e74c3c;
            --purple: #9b59b6;
            --cyan: #008b8b;
            --text: #333333;
            --border: #ccc;
            --shadow: rgba(0,0,0,0.1);
        }

        * { box-sizing: border-box; transition: background 0.3s, color 0.3s; }
        
        /* SETTING UTAMA BIAR SCROLL ENAK DI HP */
        html, body {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            overflow: hidden; /* Kunci Body utama biar gak bounce */
            background: var(--bg);
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: var(--text);
            font-family: 'Segoe UI', sans-serif;
        }

        /* --- STATUS BAR (TOP) --- */
        .status-bar {
            height: 35px;
            background: rgba(20, 20, 20, 0.95);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.75rem;
            position: absolute; top: 0; left: 0; width: 100%;
            z-index: 1000;
        }
        
        body.light-mode .status-bar { background: rgba(240, 240, 240, 0.95); }
        .status-left { color: var(--gold); letter-spacing: 2px; font-weight: bold; }
        .status-right-group { display: flex; align-items: center; gap: 15px; }
        .clock-display { color: #666; font-size: 0.7rem; }

        /* SETTINGS MENU */
        .settings-btn {
            background: none; border: none; color: var(--gold);
            font-size: 1rem; cursor: pointer; padding: 5px;
            transition: transform 0.5s;
        }
        .settings-btn:hover { transform: rotate(90deg); color: var(--cyan); }

        .settings-dropdown {
            display: none; position: absolute; top: 35px; right: 10px;
            width: 200px; background: var(--card-bg);
            border: 1px solid var(--gold); border-radius: 0 0 10px 10px;
            box-shadow: 0 10px 20px var(--shadow); padding: 15px; z-index: 1100;
        }
        .settings-dropdown.active { display: block; animation: slideDown 0.3s ease; }
        @keyframes slideDown { from {opacity:0; transform:translateY(-10px);} to {opacity:1; transform:translateY(0);} }
        
        .setting-item { margin-bottom: 15px; }
        .setting-label { font-size: 0.7rem; color: var(--gold); text-transform: uppercase; margin-bottom: 8px; display: block; font-weight: bold; }
        .btn-theme, .btn-wall {
            width: 100%; padding: 6px; margin-bottom: 4px;
            background: transparent; border: 1px solid var(--border);
            color: var(--text); cursor: pointer; font-size: 0.8rem;
            text-align: left; border-radius: 4px;
        }
        .btn-theme:hover, .btn-wall:hover { background: rgba(212, 175, 55, 0.2); border-color: var(--gold); }

        /* --- MAIN DESKTOP AREA --- */
        #desktop-area {
            position: absolute;
            top: 35px; /* Tinggi Status Bar */
            bottom: var(--taskbar-h); /* Tinggi Taskbar */
            left: 0; right: 0;
            overflow: hidden; /* Kontainer utama diam */
        }

        /* --- DASHBOARD WIDGETS (SCROLLABLE AREA) --- */
        .dashboard-content {
            width: 100%;
            height: 100%;
            overflow-y: auto; /* SCROLL AKTIF DISINI */
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch; /* FIX IOS SCROLL */
            padding-bottom: 100px; /* Ruang lebih biar gak ketutup taskbar */
        }
        
        .hero-section { padding: 20px 30px 0 30px; }
        .widget-card {
            background: linear-gradient(145deg, rgba(26,26,26,0.9), rgba(13,13,13,0.9));
            border: 1px solid var(--gold); border-radius: 20px;
            padding: 25px; display: flex; justify-content: space-between;
            align-items: center; box-shadow: 0 0 20px rgba(212, 175, 55, 0.1);
            position: relative; overflow: hidden; backdrop-filter: blur(5px);
        }
        body.light-mode .widget-card { background: linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.9)); }
        
        .widget-card::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(212,175,55,0.05) 0%, transparent 60%);
            animation: pulse 10s infinite;
        }
        @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.1);} 100% {transform: scale(1);} }

        .widget-time-group { z-index: 2; }
        .nus-clock { font-family: 'Orbitron', sans-serif; font-size: 3.5rem; font-weight: bold; color: var(--text); line-height: 1; text-shadow: 0 0 10px rgba(128,128,128,0.2); }
        .nus-phase { font-size: 0.9rem; color: var(--gold); letter-spacing: 4px; margin-top: 5px; text-transform: uppercase; font-weight: bold; }
        .widget-date-group { text-align: right; z-index: 2; }
        .nus-dayname { font-size: 1.2rem; color: var(--green); font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        .nus-full-date { font-size: 0.9rem; color: #888; margin-top: 5px; }
        .nus-pasaran { display: inline-block; background: var(--gold); color: #000; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; margin-top: 5px; }

        /* --- PERBAIKAN ICON DESKTOP (TRANSPARAN & RAPAT) --- */
        .dashboard-grid {
            padding: 20px;
            display: grid;
            /* Ukuran grid lebih kecil agar ikon lebih rapat */
            grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); 
            gap: 10px;
            align-content: start;
        }

        a.app-card {
            text-decoration: none; 
            background: transparent; /* Hilangkan kotak background */
            border: 1px solid transparent; /* Hilangkan border kotak */
            border-radius: 10px;
            display: flex; 
            flex-direction: column; 
            align-items: center;
            justify-content: center; 
            transition: 0.2s; 
            position: relative;
            box-shadow: none; /* Hilangkan bayangan kotak */
            cursor: pointer;
            height: 110px; /* Tinggi disesuaikan */
            padding: 5px;
        }

        /* Efek hover seperti windows desktop */
        a.app-card:hover { 
            background: rgba(212, 175, 55, 0.1); 
            border-color: rgba(212, 175, 55, 0.3);
            transform: translateY(0); /* Tidak perlu melayang terlalu tinggi */
        }

        .app-icon { 
            font-size: 2.8rem; /* Ukuran icon sedikit diperbesar */
            margin-bottom: 5px;
            filter: drop-shadow(0 0 8px rgba(0,0,0,0.5)); /* Bayangan pada icon saja */
        }

        .app-label { 
            font-size: 0.65rem; 
            font-weight: 600; 
            color: #ffffff; /* Paksa warna putih agar kontras dengan wallpaper */
            opacity: 1; 
            text-align: center; 
            letter-spacing: 0.3px; 
            text-transform: none; /* Hilangkan Uppercase berlebih */
            padding: 0 2px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.8); /* Shadow teks agar terbaca di wallpaper terang */
            line-height: 1.2;
            display: -webkit-box;
            -webkit-line-clamp: 2; /* Batasi 2 baris teks */
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* Atur ukuran gambar di dalam icon jika ada */
        .app-icon img {
            width: 50px;
            height: 50px;
            object-fit: contain;
        }
        
        a.app-card {
            text-decoration: none; background: var(--card-bg);
            border: 1px solid var(--border); border-radius: 15px;
            display: flex; flex-direction: column; align-items: center;
            justify-content: center; transition: 0.3s; position: relative;
            box-shadow: 0 4px 6px var(--shadow); cursor: pointer;
            height: 130px; /* Fix Height */
        }
        a.app-card:hover { transform: translateY(-5px); border-color: var(--gold); box-shadow: 0 8px 15px var(--shadow); }
        .app-icon { font-size: 2.5rem; margin-bottom: 8px; }
        .app-label { font-size: 0.7rem; font-weight: bold; color: var(--text); opacity: 0.9; text-align: center; letter-spacing: 0.5px; text-transform: uppercase; padding: 0 5px; }

        /* CATEGORY COLORS */
        .cat-time .app-icon { color: var(--gold); }
        .cat-nature .app-icon { color: var(--green); }
        .cat-culture .app-icon { color: var(--text); }
        .cat-sys .app-icon { color: var(--red); }
        .cat-blue .app-icon { color: var(--blue); }
        .cat-lingo .app-icon { color: var(--purple); }
        .cat-tech .app-icon { color: var(--cyan); }
        .cat-edu .app-icon { color: #ff9900; }
        .cat-human .app-icon { color: #ff00ff; }
        .cat-fin .app-icon { color: #ffd700; }
        .cat-future .app-icon { color: #00ced1; }
        .cat-tools .app-icon { color: #aaa; }
        .cat-doc .app-icon { color: #fff; }
        body.light-mode .cat-doc .app-icon, body.light-mode .cat-culture .app-icon { color: #333; }

        /* --- APP WINDOWS --- */
        #app-windows-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 50;
        }
        .app-window {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg); display: none; pointer-events: auto;
            flex-direction: column;
        }
        .app-window.active { display: flex; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from {opacity:0; transform: scale(0.99);} to {opacity:1; transform: scale(1);} }
        iframe { flex: 1; border: none; width: 100%; height: 100%; background: #fff; }

        /* --- START MENU POPUP --- */
        .start-menu-popup {
            display: none;
            position: absolute;
            bottom: 60px;
            left: 10px;
            width: 220px;
            background: rgba(20, 20, 20, 0.95);
            border: 1px solid var(--gold);
            border-radius: 10px;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            z-index: 2100;
            overflow: hidden;
            animation: slideUp 0.2s ease-out;
        }

        @keyframes slideUp { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }

        .start-menu-header {
            background: linear-gradient(90deg, var(--gold), #b8860b);
            color: #000;
            padding: 10px 15px;
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.8rem;
        }

        .start-menu-item {
            padding: 12px 15px;
            color: var(--text);
            cursor: pointer;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex; align-items: center; gap: 10px;
            font-size: 0.85rem;
            transition: 0.2s;
        }

        .start-menu-item:last-child { border-bottom: none; }
        .start-menu-item:hover { background: rgba(212, 175, 55, 0.2); }
        .danger-item:hover { background: rgba(192, 57, 43, 0.4) !important; color: #fff; }

        /* --- TASKBAR --- */
        .taskbar {
            height: var(--taskbar-h);
            background: rgba(10, 10, 10, 0.98);
            border-top: 1px solid var(--border);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 10px;
            position: absolute; bottom: 0; left: 0; width: 100%;
            z-index: 2000;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.3);
        }
        body.light-mode .taskbar { background: rgba(245, 245, 245, 0.98); }

        .taskbar-left {
            display: flex; align-items: center; gap: 10px; flex: 1; width: 100%; overflow: hidden;
        }

        .start-button {
            width: 38px; height: 38px; min-width: 38px;
            background: var(--gold); border-radius: 6px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.4rem; cursor: pointer; color: #000;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.4);
            transition: 0.3s;
        }
        .start-button:hover { background: #fff; box-shadow: 0 0 15px var(--gold); }
        
        .task-list {
            display: flex; gap: 5px; overflow-x: auto; width: 100%;
            -webkit-overflow-scrolling: touch; /* FIX SCROLL TASKBAR */
        }
        
        .task-tab {
            width: 160px; min-width: 130px;
            flex-shrink: 0; /* Biar gak gepeng */
            background: rgba(255,255,255,0.05); border-bottom: 2px solid transparent;
            border-radius: 4px; padding: 5px 10px;
            display: flex; align-items: center; justify-content: space-between;
            cursor: pointer; user-select: none; transition: 0.2s;
        }
        body.light-mode .task-tab { background: rgba(0,0,0,0.05); }
        
        .task-tab:hover { background: rgba(255,255,255,0.1); }
        .task-tab.active { 
            background: rgba(212, 175, 55, 0.15); 
            border-bottom: 2px solid var(--gold);
        }
        
        .task-tab-icon { margin-right: 6px; font-size: 0.9rem; }
        .task-tab-title { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 0.75rem; color: var(--text); flex: 1; }
        .task-close-btn { color: var(--text); font-size: 1rem; margin-left: 5px; opacity: 0.4; border-radius: 50%; padding: 0 4px;}
        .task-close-btn:hover { opacity: 1; background: var(--red); color: #fff; }

        /* --- TRAY (KANAN TASKBAR) --- */
        .taskbar-tray {
            display: flex; align-items: center; gap: 10px;
            padding-left: 15px; border-left: 1px solid var(--border);
            margin-left: 10px; min-width: max-content;
        }
        
        .tray-clock-container { text-align: right; line-height: 1.1; cursor: default; }
        .tray-time { font-family: 'Orbitron', sans-serif; font-size: 0.9rem; color: var(--gold); font-weight: bold; }
        .tray-date { font-size: 0.7rem; color: var(--text); opacity: 0.8; text-transform: capitalize; }

        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #555; border-radius: 2px; }

        /* ========================================= */
        /* === MOBILE RESPONSIVE FIX (IMPORTANT) === */
        /* ========================================= */
        @media (max-width: 768px) {
            .taskbar {
                position: fixed; bottom: 0; left: 0; width: 100%;
                z-index: 9999;
                padding-bottom: env(safe-area-inset-bottom);
            }
            
            #desktop-area {
                top: 35px;
                bottom: 0; 
                height: auto;
            }

            .dashboard-content {
                padding-bottom: 120px !important; /* Extra padding for scroll */
            }

            .start-menu-popup {
                position: fixed;
                bottom: calc(50px + 15px + env(safe-area-inset-bottom));
                left: 10px;
            }

            .status-right-group .clock-display { display: none; }
        }

        /* --- MODAL STYLE (USER REQUEST) --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 99999; /* Paling Depan */
            display: flex; justify-content: center; align-items: center;
            backdrop-filter: blur(10px);
            animation: fadeIn 1s ease-out;
        }

        .modal-content {
            width: 90%; max-width: 700px;
            background: #0a0500;
            border: 2px solid #ff3333;
            box-shadow: 0 0 50px rgba(255, 51, 51, 0.3);
            padding: 40px;
            text-align: justify;
            color: #e0e0e0;
            font-family: 'Courier New', monospace;
            position: relative;
            max-height: 80vh; overflow-y: auto; /* Modal Scrollable if too long */
        }

        /* Efek Garis Scanline */
        .modal-content::before {
            content: " "; display: block; position: absolute; top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 2; background-size: 100% 2px, 3px 100%; pointer-events: none;
        }

        .modal-header {
            text-align: center; font-size: 1.5rem; font-weight: bold; color: #ff3333;
            border-bottom: 1px solid #ff3333; padding-bottom: 15px; margin-bottom: 20px;
            letter-spacing: 2px; text-shadow: 0 0 10px #ff3333;
        }

        .modal-body p { margin-bottom: 20px; line-height: 1.6; font-size: 1rem; }
        .modal-body strong { color: #ffd700; }

        .accept-btn {
            display: block; width: 100%; padding: 15px; margin-top: 30px;
            background: #1a0505; border: 1px solid #ff3333; color: #ff3333;
            font-family: 'Courier New', monospace; font-weight: bold; font-size: 1rem;
            cursor: pointer; transition: 0.3s; text-transform: uppercase; letter-spacing: 2px;
            position: relative; z-index: 10;
        }

        .accept-btn:hover { background: #ff3333; color: #000; box-shadow: 0 0 20px #ff3333; }

        @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
    </style>
</head>
<body>

    <div id="warningModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">‚ö†Ô∏è FREQUENCY LAW ENFORCEMENT</div>
            <div class="modal-body">
                <p>
                    Dengarkan baik-baik wahai setiap jiwa yang melangkah masuk ke dalam arsip digital <strong>Sunda Nuswantara OS</strong>. Ketahuilah bahwa seluruh pengetahuan, cetak biru, dan wawasan kuno yang dibuka kembali di tempat ini bukanlah alat untuk memuaskan nafsu keserakahan, memperkaya diri secara materialistis, atau digunakan untuk tujuan dominasi yang merugikan pihak lain.
                </p>
                <p>
                    Barangsiapa yang berani menyalahgunakan ilmu restorasi peradaban <strong>Lemuria</strong> dan teknologi <strong>Old World</strong> ini dengan niat negatif, maka ia secara otomatis telah menandatangani kontrak kehancurannya sendiri melalui <strong>Hukum Kekekalan Frekuensi</strong>, di mana energi buruk yang ia pancarkan akan memantul balik dengan daya hancur yang presisi kepada pelakunya tanpa bisa dihindari.
                </p>
                <p>
                    Pintu gerbang pengetahuan ini dibuka ke hadapan publik dengan satu mandat suci, yaitu untuk merestorasi kembali teknologi leluhur yang nyaris punah dan menghidupkan warisan dunia lama yang selama ini sengaja dihapus dari sejarah. Tujuan mutlak dari penyebaran ilmu ini adalah untuk menciptakan kemandirian peradaban, memutus rantai perbudakan sistemik, serta menghancurkan ketergantungan umat manusia terhadap monopoli energi dan sumber daya yang dicengkeram erat oleh tirani <strong>Neo Atlantis</strong> dan agenda para globalis. Gunakanlah dengan kesadaran murni demi kebaikan semesta, atau biarkan frekuensi ini yang akan menghakimimu.
                </p>
            </div>
            <button class="accept-btn" onclick="closeWarning()">SAYA MENERIMA KONSEKUENSI INI</button>
        </div>
    </div>

    <div class="status-bar">
        <div class="status-left">NUSWANTARA OS</div>
        <div class="status-right-group">
            <div class="clock-display" id="masehi-clock">Local : 00:00</div>
            <div style="position:relative;">
                <button class="settings-btn" onclick="toggleSettings()">‚öôÔ∏è</button>
                <div class="settings-dropdown" id="settingsMenu">
                    <div class="setting-item">
                        <span class="setting-label">TEMA TAMPILAN</span>
                        <button class="btn-theme" onclick="setTheme('dark')">üåë Dark Mode</button>
                        <button class="btn-theme" onclick="setTheme('light')">‚òÄÔ∏è Light Mode</button>
                    </div>
                    <div class="setting-item">
                        <span class="setting-label">WALLPAPER</span>
                        <button class="btn-wall" onclick="setWall('default')">‚¨õ Default</button>
                        <button class="btn-wall" onclick="setWall('wall1')">üèîÔ∏è Alam</button>
                        <button class="btn-wall" onclick="setWall('wall2')">üóø Tekstur</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="desktop-area">
        
        <div id="dashboard-layer" class="dashboard-content">
            <div class="hero-section">
                <div class="widget-card">
                    <div class="widget-time-group">
                        <div class="nus-clock" id="widget-clock">00:00</div>
                        <div class="nus-phase" id="widget-phase">---</div>
                    </div>
                    <div class="widget-date-group">
                        <div class="nus-dayname" id="widget-dayname">---</div>
                        <div class="nus-full-date" id="widget-fulldate">---</div>
                        <div class="nus-pasaran" id="widget-pasaran">---</div>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <a href="#" onclick="launchApp('explorer.html', 'Explorer', 'üìÇ')" class="app-card cat-tech">
                  <div class="app-icon">üìÇ</div>
                  <div class="app-label">Explorer</div>
                </a>
                <a href="#" onclick="launchApp('01 Jam Sunda Nuswantara.html', 'Jam Utama', 'üïê')" class="app-card cat-time">
                    <div class="app-icon">üïê</div><div class="app-label">Jam Utama</div>
                </a>
                <a href="#" onclick="launchApp('02. Kalender Sunda Nuswantara.html', 'Kalender', 'üìÖ')" class="app-card cat-time">
                    <div class="app-icon">üìÖ</div><div class="app-label">Kalender</div>
                </a>
                <a href="#" onclick="launchApp('03. Jadwal Shalat Sunda Nuswantara.html', 'Shalat', 'üïå')" class="app-card cat-time">
                    <div class="app-icon">üïå</div><div class="app-label">Shalat</div>
                </a>
                <a href="#" onclick="launchApp('04. Converter Waktu & Tanggal Ke Sunda Nuswantara.html', 'Konverter', 'üîÑ')" class="app-card cat-sys">
                    <div class="app-icon">üîÑ</div><div class="app-label">Konverter</div>
                </a>
                <a href="#" onclick="launchApp('13. Kumpulan Renungan.html', 'Renungan', 'üìö')" class="app-card cat-lingo">
                    <div class="app-icon">üìö</div><div class="app-label">Renungan</div>
                </a>
                <a href="15. Appraisal Scanner.html" class="app-card cat-doc">
                    <div class="app-icon">üîç</div><div class="app-label">Appraisal</div>
                </a>
                <a href="#" onclick="launchApp('21. Pustaka Peradaban.html', 'Leveling Diri', '‚è´')" class="app-card cat-lingo">
                    <div class="app-icon">‚è´</div><div class="app-label">Leveling Diri</div>
                </a>
                <a href="23. Scanner Nilai Dasar.html" class="app-card cat-doc">
                    <div class="app-icon">üîç</div><div class="app-label">Analisa Dasar</div>
                </a>
                <a href="#" onclick="launchApp('27. Menu Hukum Syariat dan Hakikat.html', 'Syariat & Hakikat', '‚öñÔ∏è')" class="app-card cat-edu">
                    <div class="app-icon">‚öñÔ∏è</div><div class="app-label">Syariat & Hakikat</div>
                </a>
                <a href="#" onclick="launchApp('28. Indikator Iman.html', 'Iman Metric', 'üì∂')" class="app-card cat-tools">
                    <div class="app-icon">üì∂</div><div class="app-label">Iman Metric</div>
                </a>
                <a href="29. Pustaka Ajaran Tauhid.html" class="app-card cat-doc">
                    <div class="app-icon">üìÑ</div><div class="app-label">Pustaka Ajaran Tauhid</div>
                </a>
                <a href="#" onclick="launchApp('30. Quantum Vitality.html', 'Quantum Vitality', '‚öõÔ∏è')" class="app-card cat-future">
                    <div class="app-icon">‚öõÔ∏è</div><div class="app-label">Quantum Vitality</div>
                </a>
                <a href="34.Nusantara Auto-Anchor (POS Mode).html" target="_blank" class="app-card cat-future">
                    <div class="app-icon" style="display: flex; align-items: center; justify-content: center;">
                    <img src="https://nanansuh234.github.io/Sunda-Nuswantara-OS/favicon.png" alt="Icon POS" style="width: 50px; height: 50px;">
                    </div>
                    <div class="app-label">Nusantara Auto-Anchor (POS Mode)</div>
                </a>
                <a href="#" onclick="launchApp('37. Jam Pasir Timer.html', 'Jam Pasir', '‚è≥')" class="app-card cat-sys">
                    <div class="app-icon">‚è≥</div><div class="app-label">Jam Pasir Nusantara</div>
                </a>
                <a href="#" onclick="launchApp('41. Ancient Astronomy.html', 'Astronomy', 'üïê')" class="app-card cat-sys">
                    <div class="app-icon">üïê</div><div class="app-label">Ancient Astronomy</div>
                </a>
                <a href="#" onclick="launchApp('42. Advanced Systems.html', 'Adv Systems', '‚öõÔ∏è')" class="app-card cat-future">
                    <div class="app-icon">‚öõÔ∏è</div><div class="app-label">Advanced Systems</div>
                </a>
                <a href="#" onclick="launchApp('43. Forbidden Tech.html', 'Forbidden', '‚öõÔ∏è')" class="app-card cat-future">
                    <div class="app-icon">‚öõÔ∏è</div><div class="app-label">Forbidden Tech</div>
                <a href="54. Double Anchor System.html" class="app-card cat-doc">
                    <div class="app-icon">‚öñÔ∏è</div><div class="app-label">Double Anchor System</div>
                </a>
                <a href="#" onclick="launchApp('55. Nilai Komoditas.html', 'Daftar Nilai', 'üìö')" class="app-card cat-fin">
                    <div class="app-icon">üìö</div>
                    <div class="app-label">Daftar Nilai Komoditas</div>
                </a>
                <a href="#" onclick="launchApp('56. Sunda Nuswantara Archive.html', 'Nuswantara Archive', 'üìö')" class="app-card cat-fin">
                    <div class="app-icon">üìñ</div>
                    <div class="app-label">SUNDA NUSWANTARA ARCHIVE</div>
                </a>
                <a href="#" onclick="launchApp('62. Menu Ether Tech.html', 'Ether Tech', '‚ö°')" class="app-card cat-fin">
                    <div class="app-icon">‚ö°</div>
                    <div class="app-label">ETHER TECH & BLUEPRINTS</div>
                </a>
                <a href="#" onclick="launchApp('kompas.html', 'Kompas Taktis', 'üß≠')" class="app-card cat-fin">
                    <div class="app-icon">üß≠</div>
                    <div class="app-label">NAVIGASI TAKTIS (Kompas & GPS)</div>
                </a>
                <a href="#" onclick="launchApp('petajalur.html', 'Peta jalur', 'üåç')" class="app-card cat-fin">
                    <div class="app-icon">üåç</div>
                    <div class="app-label">BUAT PETA JALUR (navigasi manual)</div>
                </a>
                <a href="#" onclick="launchApp('DecentralizedID.html', 'Cetak Data Personal', 'üìÑ')" class="app-card cat-fin">
                    <div class="app-icon">üìÑ</div>
                    <div class="app-label">Cetak Data Personal</div>
                </a>
                <a href="#" onclick="launchApp('mtfzonetradingsystem.html', 'MTF Zone Trading System', 'üìà')" class="app-card cat-human">
                    <div class="app-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 40px; height: 40px;">
                    <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                    <polyline points="17 6 23 6 23 12"></polyline>
                </svg>
                </div>
                    <div class="app-label">MTF Zone Trading System</div>
                </a>
                <a href="Nmail.html" style="text-decoration: none;">
    <div style="
        width: 100px; 
        height: 120px; 
        cursor: pointer; 
        transition: transform 0.2s; 
        display: flex; 
        flex-direction: column; 
        align-items: center;"
        onmouseover="this.style.transform='scale(1.1)'"
        onmouseout="this.style.transform='scale(1)'">
        
        <svg viewBox="0 0 100 100" width="100" height="100" xmlns="http://www.w3.org/2000/svg" style="display: block;">
            <defs>
                <linearGradient id="goldGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#fceabb;stop-opacity:1" />
                    <stop offset="50%" style="stop-color:#d4af37;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#9e7f22;stop-opacity:1" />
                </linearGradient>
            </defs>
            
            <rect x="5" y="5" width="90" height="90" rx="22" fill="#202124" stroke="url(#goldGrad)" stroke-width="2"/>
            
            <rect x="20" y="25" width="60" height="50" rx="4" fill="#e0e0e0"/>
            
            <path d="M20 25 L50 55 L80 25 Z" fill="#1a73e8"/>
            <path d="M20 25 L50 55 L80 25" stroke="#105cb6" stroke-width="1" fill="none"/>
            
            <circle cx="50" cy="55" r="12" fill="url(#goldGrad)" stroke="#fff" stroke-width="2"/>
            <rect x="46" y="52" width="8" height="6" rx="1" fill="#202124"/>
            <path d="M47 52 V50 A3 3 0 0 1 53 50 V52" stroke="#202124" stroke-width="2" fill="none"/>
        </svg>

        <div style="text-align:center; color:#d4af37; font-size:14px; font-family:sans-serif; margin-top:8px; font-weight: bold;">
            N-Mail
        </div>
    </div>
</a>
                <a href="#" onclick="launchApp('SMS.html', 'Inbox SMS', 'üìÇ')" class="app-card cat-human">
                    <div class="app-icon">‚úâÔ∏è</div>
                    <div class="app-label">Inbox SMS</div>
                </a>
                <a href="#" onclick="launchApp('56. Nuswantara Hub.html', 'Inbox SMS', 'üë§')" class="app-card cat-human">
                    <div class="app-icon">üë§</div>
                    <div class="app-label">Nuswantara Hub & Tools</div>
                </a>
                    <a href="" onclick="launchApp('Bio Medic.html', 'Realitas & Masa Depan', 'üíä')" class="app-card cat-future">
                    <div class="app-icon">üíä</div><div class="app-label">Bio Medic Hacking</div>
                </a>
                    <a href="Systemstabillitysettlement.html" target="_blank" class="app-card cat-future">
                    <div class="app-icon" style="display: flex; align-items: center; justify-content: center;">
                    <img src="https://nanansuh234.github.io/Sunda-Nuswantara-OS/favicon.png" alt="Icon POS" style="width: 50px; height: 50px;">
                    </div>
                    <div class="app-label">System Stability Settlement</div>
                </a>
                    <a href="marketwatch.html" class="app-card cat-doc">
                    <div class="app-icon">‚öñÔ∏è</div><div class="app-label">New Gold Standard (Market Watch)</div>
                </a>
                    <a href="#" onclick="launchApp('Multi Tools.html', 'Multi Tools', 'üïê')" class="app-card cat-sys">
                    <div class="app-icon">üïê</div><div class="app-label">Perlengkapan Taktis</div>
                </a>
                    <a href="#" onclick="launchApp('petaduniabaru.html', 'Sunda Nuswantara Map', 'üåç')" class="app-card cat-fin">
                    <div class="app-icon">üåç</div>
                    <div class="app-label">Peta Dunia Baru Nuswantara</div>
                </a>
                    <a href="#" onclick="launchApp('edukasi survival dasar.html', 'Edukasi Survival Dasar', 'üìö')" class="app-card cat-lingo">
                    <div class="app-icon">üìö</div><div class="app-label">Kumpulan Informasi Dasar Survival</div>
                </a>
                    <a href="explorer.html" class="app-card cat-doc">
                    <div class="app-icon">üí†</div><div class="app-label">Buka Explorer</div>
                </a>
                    
            </div>

            <div style="text-align:center; padding: 20px; font-size:0.6rem; color:#666;">
                SYSTEM READY // FREQUENCY ALIGNED // NANAN SUHENDAR
            </div>
        </div>

        <div id="app-windows-container">
            </div>

    </div>

    <div id="startMenu" class="start-menu-popup">
        <div class="start-menu-header">NUSWANTARA OS</div>
        <div class="start-menu-item" onclick="showDashboard(); toggleStartMenu()">
            <span>üí†</span> Ke Dashboard
        </div>
        <div class="start-menu-item" onclick="closeAllApps(); toggleStartMenu()">
            <span>üßπ</span> Tutup Semua App (Clear RAM)
        </div>
        <div class="start-menu-item danger-item" onclick="hardRefresh()">
            <span>üîÑ</span> <b>SYSTEM REFRESH (Fix Bug)</b>
        </div>
    </div>

    <div class="taskbar">
        <div class="taskbar-left">
            <div class="start-button" onclick="toggleStartMenu()" title="Menu Sistem">
                üí†
            </div>
            <div class="task-list" id="task-list">
                </div>
        </div>

        <div class="taskbar-tray">
            <div class="tray-clock-container">
                <div class="tray-time" id="tray-time">00:00:00</div>
                <div class="tray-date" id="tray-date">Loading...</div>
            </div>
        </div>
    </div>

    <script>
        // === LOGIC DATABASE & WAKTU ===
        const months = ["Wiwitan", "Gangga", "Bija", "Trubus", "Teja", "Baskara", "Kartika", "Huma", "Phala", "Lumbung", "Reswara", "Purnaka", "Suwung"];
        const pasarans = ["Legi", "Pahing", "Pon", "Wage", "Kliwon"];
        const saptawara = ["Sukra", "Tumpak", "Radite", "Soma", "Anggara", "Budha", "Respati"]; 
        const phases = ["HENING", "FAJAR", "DUHA", "KARYA", "ISTIWA", "ASAR", "SANDIKALA", "SIREPAN"];

        function updateWidget() {
            const now = new Date();
            document.getElementById('masehi-clock').innerText = "Local : " + now.toLocaleTimeString('id-ID');

            const h = now.getHours();
            const m = now.getMinutes();
            const s = now.getSeconds();
            
            let totalMin = ((h % 12) * 60) + m + (s/60);
            let nHours = totalMin / 90; 
            let dH = Math.floor(nHours) || 8; 
            let remMin = (nHours % 1) * 90;
            let dM = Math.floor(remMin);
            let remSec = (remMin % 1) * 60;
            let dS = Math.floor(remSec);

            let strH = String(dH).padStart(2,'0');
            let strM = String(dM).padStart(2,'0');
            let strS = String(dS).padStart(2,'0');

            document.getElementById('widget-clock').innerText = `${strH}:${strM}`;
            document.getElementById('tray-time').innerText = `${strH}:${strM}:${strS}`;

            const phaseIdx = Math.floor(h / 3); 
            let currentPhase = phases[phaseIdx];
            let cycle = (h >= 6 && h < 18) ? "SIANG" : "MALAM";
            document.getElementById('widget-phase').innerText = `${currentPhase} (${cycle})`;

            let anchor = new Date(now.getFullYear(), 2, 21);
            if (now < anchor) { anchor = new Date(now.getFullYear() - 1, 2, 21); }
            
            const oneDay = 24 * 60 * 60 * 1000;
            let diffDays = Math.floor((now - anchor) / oneDay);
            let mIdx = Math.floor(diffDays / 28);
            let dNus = (diffDays % 28) + 1;
            
            let yearBase = 2025;
            let currentNusYear = now.getFullYear() - yearBase + 1;
            if (now < new Date(now.getFullYear(), 2, 21)) { currentNusYear -= 1; }
            let yearStr = String(Math.max(1, currentNusYear)).padStart(3, '0');

            let monthName = "";
            if (mIdx >= 13) { monthName = "SUWUNG"; dNus = "Eternity"; } 
            else { monthName = months[mIdx]; }

            let baseAbsolute = new Date(2025, 2, 21);
            let diffAbs = Math.floor((now - baseAbsolute) / oneDay);
            let pIdx = (2 + (diffAbs % 5)) % 5;
            if (pIdx < 0) pIdx += 5;
            
            let sIdx = (diffAbs % 7);
            if (sIdx < 0) sIdx += 7;

            let pasaranName = pasarans[pIdx];
            let dayName = saptawara[sIdx];

            document.getElementById('widget-dayname').innerText = dayName.toUpperCase();
            document.getElementById('widget-pasaran').innerText = pasaranName.toUpperCase();
            document.getElementById('widget-fulldate').innerText = `${dNus} ${monthName.toUpperCase()} ${yearStr}`;
            document.getElementById('tray-date').innerText = `${pasaranName}, ${dNus} ${monthName} ${yearStr}`;
        }
        setInterval(updateWidget, 1000);
        updateWidget();

        // === SETTINGS LOGIC ===
        function toggleSettings() {
            document.getElementById('settingsMenu').classList.toggle('active');
        }

        document.addEventListener('click', function(e) {
            const btn = document.querySelector('.settings-btn');
            const menu = document.getElementById('settingsMenu');
            if (!btn.contains(e.target) && !menu.contains(e.target)) {
                menu.classList.remove('active');
            }
        });

        function setWall(type) {
            const body = document.body;
            if (type === 'default') { body.style.backgroundImage = 'none'; } 
            else if (type === 'wall1') { body.style.backgroundImage = "url('https://nanansuh234.github.io/Sunda-Nuswantara-OS/wall1.jpg')"; } 
            else if (type === 'wall2') { body.style.backgroundImage = "url('https://nanansuh234.github.io/Sunda-Nuswantara-OS/wall2.jpg')"; }
            localStorage.setItem('nus_wall', type);
        }

        function setTheme(mode) {
            if (mode === 'light') { document.body.classList.add('light-mode'); } 
            else { document.body.classList.remove('light-mode'); }
            localStorage.setItem('nus_theme', mode);
        }

        // ============================================
        // === PERSISTENT MULTITASKING / TASKBAR LOGIC ===
        // ============================================

        let openApps = []; 
        const MAX_APPS = 6; 

        // Fungsi Load State saat Startup
        window.onload = function() {
            // Load Settings
            const savedWall = localStorage.getItem('nus_wall');
            if (savedWall) setWall(savedWall);
            const savedTheme = localStorage.getItem('nus_theme');
            if (savedTheme) setTheme(savedTheme);

            // Cek Warning Modal
            // if(localStorage.getItem('nuswantara_warning_accepted') === 'true') {
            //     document.getElementById('warningModal').style.display = 'none';
            // }

            // Load Apps State (Session Restore)
            const savedApps = localStorage.getItem('nus_open_apps');
            const savedActiveApp = localStorage.getItem('nus_active_app_id');

            if (savedApps) {
                try {
                    openApps = JSON.parse(savedApps);
                    // Re-create windows with AUTO-CLEANER
                    openApps.forEach(app => createAppWindow(app));
                    // Re-render taskbar
                    renderTaskbar();
                    
                    // Restore Active Window
                    if (savedActiveApp && savedActiveApp !== 'dashboard') {
                        // Check if app still exists
                        if (openApps.find(a => a.id === savedActiveApp)) {
                            switchToApp(savedActiveApp);
                        } else if (openApps.length > 0) {
                             switchToApp(openApps[openApps.length-1].id);
                        } else {
                            showDashboard();
                        }
                    } else {
                        showDashboard();
                    }
                } catch(e) {
                    console.log("Error restore session:", e);
                    openApps = []; // Reset if error
                }
            }
        };

        function closeWarning() {
            const modal = document.getElementById('warningModal');
            modal.style.transition = "opacity 1s";
            modal.style.opacity = "0";
            setTimeout(() => {
                modal.style.display = "none";
            }, 1000);
            
            // Uncomment baris bawah ini kalau mau peringatan cuma muncul SEKALI selamanya
            // localStorage.setItem('nuswantara_warning_accepted', 'true');
        }

        function saveState(activeId) {
            localStorage.setItem('nus_open_apps', JSON.stringify(openApps));
            if(activeId) {
                localStorage.setItem('nus_active_app_id', activeId);
            }
        }

        function launchApp(url, title, icon) {
            const existingApp = openApps.find(app => app.title === title);
            
            if (existingApp) {
                switchToApp(existingApp.id);
            } else {
                if (openApps.length >= MAX_APPS) {
                    closeApp(openApps[0].id); 
                }
                
                const appId = 'app-' + Date.now();
                const appObj = { id: appId, title: title, icon: icon, url: url };
                openApps.push(appObj);
                
                createAppWindow(appObj);
                renderTaskbar();
                switchToApp(appId);
                
                // SAVE STATE
                saveState(appId);
            }
        }

        // === AUTO-CLEANER V2 (FIX SCROLL) ===
        function createAppWindow(app) {
            const container = document.getElementById('app-windows-container');
            if (document.getElementById(app.id)) return; 
            
            const winDiv = document.createElement('div');
            winDiv.id = app.id;
            winDiv.className = 'app-window';
            
            const iframe = document.createElement('iframe');
            iframe.src = app.url;
            iframe.style.width = "100%";
            iframe.style.height = "100%";
            iframe.style.border = "none";
            iframe.style.background = "#050505";

            // SUNTIK CSS PERBAIKAN (SCROLL BAR DIPAKSA MUNCUL)
            iframe.onload = function() {
                try {
                    const childDoc = iframe.contentDocument || iframe.contentWindow.document;
                    const style = childDoc.createElement('style');
                    style.textContent = `
                        /* 1. SEMBUNYIKAN ELEMEN SYSTEM DUPLIKAT */
                        .taskbar, .status-bar, .dock, .settings-btn, #startMenu { display: none !important; }

                        /* 2. PAKSA BODY SUPAYA BISA SCROLL (PENTING!) */
                        html, body {
                            overflow: auto !important; /* Izinkan scroll */
                            height: auto !important;   /* Jangan dikunci tinggi layarnya */
                            -webkit-overflow-scrolling: touch;
                        }

                        /* 3. KHUSUS APP YANG COPYAN OS (Punya .dashboard-content) */
                        /* Kita buka kuncinya biar dia ngikutin tinggi konten asli */
                        .dashboard-content, #desktop-area {
                            height: auto !important;
                            overflow: visible !important; 
                            padding-bottom: 60px !important; /* Ruang biar konten paling bawah gak ketutup taskbar utama */
                        }
                    `;
                    childDoc.head.appendChild(style);
                } catch (e) {
                    console.log("Auto-cleaner CORS restriction. Scroll fix might not work on local file without server.");
                }
            };

            winDiv.appendChild(iframe);
            container.appendChild(winDiv);
        }

        function renderTaskbar() {
            const taskList = document.getElementById('task-list');
            taskList.innerHTML = ''; 

            openApps.forEach(app => {
                const tab = document.createElement('div');
                tab.className = 'task-tab';
                tab.id = 'tab-' + app.id;
                
                tab.innerHTML = `
                    <span class="task-tab-icon">${app.icon}</span>
                    <span class="task-tab-title">${app.title}</span>
                    <span class="task-close-btn" onclick="event.stopPropagation(); closeApp('${app.id}')">√ó</span>
                `;
                
                tab.onclick = () => switchToApp(app.id);
                taskList.appendChild(tab);
            });
        }

        function switchToApp(appId) {
            document.querySelectorAll('.app-window').forEach(win => win.classList.remove('active'));
            const targetWin = document.getElementById(appId);
            if(targetWin) targetWin.classList.add('active');

            document.querySelectorAll('.task-tab').forEach(tab => tab.classList.remove('active'));
            const activeTab = document.getElementById('tab-' + appId);
            if(activeTab) activeTab.classList.add('active');

            // SAVE STATE
            saveState(appId);
        }

        function closeApp(appId) {
            const win = document.getElementById(appId);
            if(win) win.remove();
            openApps = openApps.filter(app => app.id !== appId);
            renderTaskbar();

            if(openApps.length === 0) {
                showDashboard();
            } else {
                const lastAppId = openApps[openApps.length - 1].id;
                switchToApp(lastAppId);
                saveState(lastAppId);
            }
            
            // SAVE STATE (Empty) if all closed
            if (openApps.length === 0) {
                 localStorage.setItem('nus_open_apps', JSON.stringify([]));
                 localStorage.setItem('nus_active_app_id', 'dashboard');
            }
        }

        function showDashboard() {
            document.querySelectorAll('.app-window').forEach(win => win.classList.remove('active'));
            document.querySelectorAll('.task-tab').forEach(tab => tab.classList.remove('active'));
            
            // SAVE STATE
            localStorage.setItem('nus_active_app_id', 'dashboard');
        }

        // === START MENU LOGIC ===
        function toggleStartMenu() {
            const menu = document.getElementById('startMenu');
            if (menu.style.display === 'block') {
                menu.style.display = 'none';
            } else {
                menu.style.display = 'block';
            }
        }

        // Close menu when clicking outside
        window.onclick = function(event) {
            if (!event.target.matches('.start-button') && !event.target.matches('.start-button *')) {
                const menu = document.getElementById('startMenu');
                if (menu) menu.style.display = 'none';
            }
        }

        // FUNGSI SYSTEM REFRESH
        function hardRefresh() {
            location.reload();
        }

        // FUNGSI TUTUP SEMUA (CLEAN RAM)
        function closeAllApps() {
            document.getElementById('app-windows-container').innerHTML = '';
            openApps = [];
            renderTaskbar();
            showDashboard();
            localStorage.setItem('nus_open_apps', JSON.stringify([]));
        }

    </script>
</body>
</html>







