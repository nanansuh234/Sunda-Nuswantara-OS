<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuswantara OS - Ultimate</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Segoe+UI:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* DARK MODE (DEFAULT) */
            --bg: #050505;
            --card-bg: #111;
            --gold: #d4af37;
            --green: #27ae60;
            --blue: #2980b9;
            --red: #c0392b;
            --purple: #9b59b6;
            --cyan: #00ffcc;
            --text: #e0e0e0;
            --border: #333;
            --shadow: rgba(0,0,0,0.5);
            --taskbar-h: 50px; 
        }

        /* LIGHT MODE VARIABLES */
        body.light-mode {
            --bg: #e0e0e0;
            --card-bg: #ffffff;
            --gold: #b8860b;
            --green: #2ecc71;
            --blue: #3498db;
            --red: #e74c3c;
            --purple: #9b59b6;
            --cyan: #008b8b;
            --text: #333333;
            --border: #ccc;
            --shadow: rgba(0,0,0,0.1);
        }

        * { box-sizing: border-box; transition: background 0.3s, color 0.3s; }
        
        body {
            margin: 0;
            background: var(--bg);
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: var(--text);
            font-family: 'Segoe UI', sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- STATUS BAR (TOP) --- */
        .status-bar {
            height: 35px;
            background: rgba(20, 20, 20, 0.95);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.75rem;
            z-index: 1000;
        }
        
        body.light-mode .status-bar { background: rgba(240, 240, 240, 0.95); }
        .status-left { color: var(--gold); letter-spacing: 2px; font-weight: bold; }
        .status-right-group { display: flex; align-items: center; gap: 15px; }
        .clock-display { color: #666; font-size: 0.7rem; }

        /* SETTINGS MENU */
        .settings-btn {
            background: none; border: none; color: var(--gold);
            font-size: 1rem; cursor: pointer; padding: 5px;
            transition: transform 0.5s;
        }
        .settings-btn:hover { transform: rotate(90deg); color: var(--cyan); }

        .settings-dropdown {
            display: none; position: absolute; top: 35px; right: 10px;
            width: 200px; background: var(--card-bg);
            border: 1px solid var(--gold); border-radius: 0 0 10px 10px;
            box-shadow: 0 10px 20px var(--shadow); padding: 15px; z-index: 1100;
        }
        .settings-dropdown.active { display: block; animation: slideDown 0.3s ease; }
        @keyframes slideDown { from {opacity:0; transform:translateY(-10px);} to {opacity:1; transform:translateY(0);} }
        .setting-item { margin-bottom: 15px; }
        .setting-label { font-size: 0.7rem; color: var(--gold); text-transform: uppercase; margin-bottom: 8px; display: block; font-weight: bold; }
        .btn-theme, .btn-wall {
            width: 100%; padding: 6px; margin-bottom: 4px;
            background: transparent; border: 1px solid var(--border);
            color: var(--text); cursor: pointer; font-size: 0.8rem;
            text-align: left; border-radius: 4px;
        }
        .btn-theme:hover, .btn-wall:hover { background: rgba(212, 175, 55, 0.2); border-color: var(--gold); }

        /* --- MAIN DESKTOP AREA --- */
        #desktop-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden; 
            position: relative;
        }

        /* --- DASHBOARD WIDGETS --- */
        .dashboard-content {
            height: 100%;
            overflow-y: auto;
            padding-bottom: 60px;
        }
        
        .hero-section { padding: 20px 30px 0 30px; }
        .widget-card {
            background: linear-gradient(145deg, rgba(26,26,26,0.9), rgba(13,13,13,0.9));
            border: 1px solid var(--gold); border-radius: 20px;
            padding: 25px; display: flex; justify-content: space-between;
            align-items: center; box-shadow: 0 0 20px rgba(212, 175, 55, 0.1);
            position: relative; overflow: hidden; backdrop-filter: blur(5px);
        }
        body.light-mode .widget-card { background: linear-gradient(145deg, rgba(255,255,255,0.9), rgba(240,240,240,0.9)); }
        
        .widget-card::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(212,175,55,0.05) 0%, transparent 60%);
            animation: pulse 10s infinite;
        }
        @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.1);} 100% {transform: scale(1);} }

        .widget-time-group { z-index: 2; }
        .nus-clock { font-family: 'Orbitron', sans-serif; font-size: 3.5rem; font-weight: bold; color: var(--text); line-height: 1; text-shadow: 0 0 10px rgba(128,128,128,0.2); }
        .nus-phase { font-size: 0.9rem; color: var(--gold); letter-spacing: 4px; margin-top: 5px; text-transform: uppercase; font-weight: bold; }
        .widget-date-group { text-align: right; z-index: 2; }
        .nus-dayname { font-size: 1.2rem; color: var(--green); font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        .nus-full-date { font-size: 0.9rem; color: #888; margin-top: 5px; }
        .nus-pasaran { display: inline-block; background: var(--gold); color: #000; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; margin-top: 5px; }

        .dashboard-grid {
            padding: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            grid-auto-rows: 130px;
            gap: 15px;
            align-content: start;
        }

        a.app-card {
            text-decoration: none; background: var(--card-bg);
            border: 1px solid var(--border); border-radius: 15px;
            display: flex; flex-direction: column; align-items: center;
            justify-content: center; transition: 0.3s; position: relative;
            box-shadow: 0 4px 6px var(--shadow); cursor: pointer;
        }
        a.app-card:hover { transform: translateY(-5px); border-color: var(--gold); box-shadow: 0 8px 15px var(--shadow); }
        .app-icon { font-size: 2.5rem; margin-bottom: 8px; }
        .app-label { font-size: 0.7rem; font-weight: bold; color: var(--text); opacity: 0.9; text-align: center; letter-spacing: 0.5px; text-transform: uppercase; padding: 0 5px; }

        /* CATEGORY COLORS */
        .cat-time .app-icon { color: var(--gold); }
        .cat-nature .app-icon { color: var(--green); }
        .cat-culture .app-icon { color: var(--text); }
        .cat-sys .app-icon { color: var(--red); }
        .cat-blue .app-icon { color: var(--blue); }
        .cat-lingo .app-icon { color: var(--purple); }
        .cat-tech .app-icon { color: var(--cyan); }
        .cat-edu .app-icon { color: #ff9900; }
        .cat-human .app-icon { color: #ff00ff; }
        .cat-fin .app-icon { color: #ffd700; }
        .cat-future .app-icon { color: #00ced1; }
        .cat-tools .app-icon { color: #aaa; }
        .cat-doc .app-icon { color: #fff; }
        body.light-mode .cat-doc .app-icon, body.light-mode .cat-culture .app-icon { color: #333; }

        /* --- APP WINDOWS --- */
        #app-windows-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
        }
        .app-window {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg); display: none; pointer-events: auto;
            flex-direction: column;
        }
        .app-window.active { display: flex; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from {opacity:0; transform: scale(0.99);} to {opacity:1; transform: scale(1);} }
        iframe { flex: 1; border: none; width: 100%; height: 100%; background: #fff; }

        /* --- START MENU POPUP (NEW) --- */
        .start-menu-popup {
            display: none;
            position: absolute;
            bottom: 60px; /* Muncul di atas taskbar */
            left: 10px;
            width: 220px;
            background: rgba(20, 20, 20, 0.95);
            border: 1px solid var(--gold);
            border-radius: 10px;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            z-index: 2100;
            overflow: hidden;
            animation: slideUp 0.2s ease-out;
        }

        @keyframes slideUp { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }

        .start-menu-header {
            background: linear-gradient(90deg, var(--gold), #b8860b);
            color: #000;
            padding: 10px 15px;
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.8rem;
        }

        .start-menu-item {
            padding: 12px 15px;
            color: var(--text);
            cursor: pointer;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex; align-items: center; gap: 10px;
            font-size: 0.85rem;
            transition: 0.2s;
        }

        .start-menu-item:last-child { border-bottom: none; }
        .start-menu-item:hover { background: rgba(212, 175, 55, 0.2); }
        .danger-item:hover { background: rgba(192, 57, 43, 0.4) !important; color: #fff; }

        /* --- TASKBAR (IMPROVED) --- */
        .taskbar {
            height: var(--taskbar-h);
            background: rgba(10, 10, 10, 0.98);
            border-top: 1px solid var(--border);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 10px;
            position: relative; z-index: 2000;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.3);
        }
        body.light-mode .taskbar { background: rgba(245, 245, 245, 0.98); }

        .taskbar-left {
            display: flex; align-items: center; gap: 10px; flex: 1; overflow: hidden;
        }

        .start-button {
            width: 38px; height: 38px; min-width: 38px;
            background: var(--gold); border-radius: 6px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.4rem; cursor: pointer; color: #000;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.4);
            transition: 0.3s;
        }
        .start-button:hover { background: #fff; box-shadow: 0 0 15px var(--gold); }
        
        .task-list {
            display: flex; gap: 5px; overflow-x: auto; width: 100%;
        }
        
        .task-tab {
            width: 160px;
            flex-shrink: 1;
            background: rgba(255,255,255,0.05); border-bottom: 2px solid transparent;
            border-radius: 4px; padding: 5px 10px;
            display: flex; align-items: center; justify-content: space-between;
            cursor: pointer; user-select: none; transition: 0.2s;
        }
        body.light-mode .task-tab { background: rgba(0,0,0,0.05); }
        
        .task-tab:hover { background: rgba(255,255,255,0.1); }
        .task-tab.active { 
            background: rgba(212, 175, 55, 0.15); 
            border-bottom: 2px solid var(--gold);
        }
        
        .task-tab-icon { margin-right: 6px; font-size: 0.9rem; }
        .task-tab-title { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 0.75rem; color: var(--text); flex: 1; }
        .task-close-btn { color: var(--text); font-size: 1rem; margin-left: 5px; opacity: 0.4; border-radius: 50%; padding: 0 4px;}
        .task-close-btn:hover { opacity: 1; background: var(--red); color: #fff; }

        /* --- TRAY (KANAN TASKBAR) --- */
        .taskbar-tray {
            display: flex; align-items: center; gap: 10px;
            padding-left: 15px; border-left: 1px solid var(--border);
            margin-left: 10px; min-width: max-content;
        }
        
        .tray-clock-container { text-align: right; line-height: 1.1; cursor: default; }
        .tray-time { font-family: 'Orbitron', sans-serif; font-size: 0.9rem; color: var(--gold); font-weight: bold; }
        .tray-date { font-size: 0.7rem; color: var(--text); opacity: 0.8; text-transform: capitalize; }

        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #555; border-radius: 2px; }

        /* ============================================================ */
        /* === TAMBAHAN KHUSUS HP (MOBILE FIX) === */
        /* Agar taskbar nempel di bawah dan tidak hilang saat scroll */
        /* ============================================================ */
        @media (max-width: 768px) {
            .taskbar {
                position: fixed !important;
                bottom: 0 !important;
                left: 0 !important;
                width: 100% !important;
                z-index: 99999 !important; /* Paling atas */
                padding-bottom: env(safe-area-inset-bottom); /* Aman untuk iPhone */
            }

            /* Start Menu ngikutin taskbar fixed */
            .start-menu-popup {
                position: fixed !important;
                bottom: calc(var(--taskbar-h) + 10px + env(safe-area-inset-bottom)) !important;
                left: 10px !important;
            }

            /* Geser konten dashboard biar icon paling bawah gak ketutup taskbar */
            .dashboard-content {
                padding-bottom: 100px !important; 
            }

            /* Agar tab aplikasi bisa di-scroll horizontal di HP */
            .task-list {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .task-tab {
                min-width: 120px; /* Lebar minimal tab di HP */
            }
        }
    </style>
</head>
<body>

    <div class="status-bar">
        <div class="status-left">NUSWANTARA OS</div>
        <div class="status-right-group">
            <div class="clock-display" id="masehi-clock">Local : 00:00</div>
            <div style="position:relative;">
                <button class="settings-btn" onclick="toggleSettings()">‚öôÔ∏è</button>
                <div class="settings-dropdown" id="settingsMenu">
                    <div class="setting-item">
                        <span class="setting-label">TEMA TAMPILAN</span>
                        <button class="btn-theme" onclick="setTheme('dark')">üåë Dark Mode</button>
                        <button class="btn-theme" onclick="setTheme('light')">‚òÄÔ∏è Light Mode</button>
                    </div>
                    <div class="setting-item">
                        <span class="setting-label">WALLPAPER</span>
                        <button class="btn-wall" onclick="setWall('default')">‚¨õ Default</button>
                        <button class="btn-wall" onclick="setWall('wall1')">üèîÔ∏è Alam</button>
                        <button class="btn-wall" onclick="setWall('wall2')">üóø Tekstur</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="desktop-area">
        
        <div id="dashboard-layer" class="dashboard-content">
            <div class="hero-section">
                <div class="widget-card">
                    <div class="widget-time-group">
                        <div class="nus-clock" id="widget-clock">00:00</div>
                        <div class="nus-phase" id="widget-phase">---</div>
                    </div>
                    <div class="widget-date-group">
                        <div class="nus-dayname" id="widget-dayname">---</div>
                        <div class="nus-full-date" id="widget-fulldate">---</div>
                        <div class="nus-pasaran" id="widget-pasaran">---</div>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <a href="#" onclick="launchApp('Readme.html', 'Tentang', '‚ÑπÔ∏è')" class="app-card cat-blue">
                    <div class="app-icon">‚ÑπÔ∏è</div><div class="app-label">Tentang</div>
                </a>
                <a href="#" onclick="launchApp('01 Jam Sunda Nuswantara.html', 'Jam Utama', 'üïê')" class="app-card cat-time">
                    <div class="app-icon">üïê</div><div class="app-label">Jam Utama</div>
                </a>
                <a href="#" onclick="launchApp('02. Kalender Sunda Nuswantara.html', 'Kalender', 'üìÖ')" class="app-card cat-time">
                    <div class="app-icon">üìÖ</div><div class="app-label">Kalender</div>
                </a>
                <a href="#" onclick="launchApp('03. Jadwal Shalat Sunda Nuswantara.html', 'Shalat', 'üïå')" class="app-card cat-time">
                    <div class="app-icon">üïå</div><div class="app-label">Shalat</div>
                </a>
                <a href="#" onclick="launchApp('04. Converter Waktu & Tanggal Ke Sunda Nuswantara.html', 'Konverter', 'üîÑ')" class="app-card cat-sys">
                    <div class="app-icon">üîÑ</div><div class="app-label">Konverter</div>
                </a>
                <a href="#" onclick="launchApp('05. Satuan Nilai Sunda Nuswantara.html', 'Satuan Nilai', '‚öñÔ∏è')" class="app-card cat-sys">
                    <div class="app-icon">‚öñÔ∏è</div><div class="app-label">Satuan Nilai</div>
                </a>
                <a href="#" onclick="launchApp('06. Contoh Jadwal Kegiatan Sunda Nuswantara.html', 'Jadwal', 'üìù')" class="app-card cat-blue">
                    <div class="app-icon">üìù</div><div class="app-label">Jadwal</div>
                </a>
                <a href="#" onclick="launchApp('07. Panduan Manual Contoh Pertanian.html', 'Lumbung', 'üåæ')" class="app-card cat-nature">
                    <div class="app-icon">üåæ</div><div class="app-label">Lumbung</div>
                </a>
                <a href="#" onclick="launchApp('08. Panduan Manual Contoh Produktifitas dan Karya.html', 'Karya', 'üî®')" class="app-card cat-nature">
                    <div class="app-icon">üî®</div><div class="app-label">Karya</div>
                </a>
                <a href="#" onclick="launchApp('09. Aksara Hanacaraka.html', 'Hanacaraka', 'Í¶≤')" class="app-card cat-culture">
                    <div class="app-icon">Í¶≤</div><div class="app-label">Hanacaraka</div>
                </a>
                <a href="#" onclick="launchApp('10. Aksara Sunda Kuno.html', 'Sunda Kuno', '·Æä')" class="app-card cat-culture">
                    <div class="app-icon">·Æä</div><div class="app-label">Sunda Kuno</div>
                </a>
                <a href="#" onclick="launchApp('11. Rekonstruksi Bahasa Sunda Kuno.html', 'Kamus', 'üìñ')" class="app-card cat-lingo">
                    <div class="app-icon">üìñ</div><div class="app-label">Kamus</div>
                </a>
                <a href="#" onclick="launchApp('12. Sunda Kuno.html', 'Olaxara', '‚úíÔ∏è')" class="app-card cat-lingo">
                    <div class="app-icon">‚úíÔ∏è</div><div class="app-label">Olaxara</div>
                </a>
                <a href="#" onclick="launchApp('Tools.html', 'Logic Engine', 'üß†')" class="app-card cat-nature">
                    <div class="app-icon">üß†</div><div class="app-label">Logic Engine</div>
                </a>
                <a href="#" onclick="launchApp('13. Kumpulan Renungan.html', 'Renungan', 'üìö')" class="app-card cat-lingo">
                    <div class="app-icon">üìö</div><div class="app-label">Renungan</div>
                </a>
                <a href="#" onclick="launchApp('14. Terapi Cahaya Malam.html', 'Terapi Sirep', 'üïØÔ∏è')" class="app-card cat-sys">
                    <div class="app-icon">üïØÔ∏è</div><div class="app-label">Terapi Sirep</div>
                </a>
                <a href="15. Appraisal Scanner.html" class="app-card cat-doc">
                    <div class="app-icon">üîç</div><div class="app-label">Appraisal</div>
                </a>
                <a href="#" onclick="launchApp('16. Restorasi Pangan.html', 'Teknologi Pangan', 'üçØ')" class="app-card cat-nature">
                    <div class="app-icon">üçØ</div><div class="app-label">Teknologi Pangan</div>
                </a>
                <a href="#" onclick="launchApp('17. Restorasi Arsitektur.html', 'Arsitektur', 'üõñ')" class="app-card cat-nature">
                    <div class="app-icon">üõñ</div><div class="app-label">Arsitektur</div>
                </a>
                <a href="#" onclick="launchApp('18. Restorasi Kesehatan.html', 'Tabib Digital', 'üåø')" class="app-card cat-nature">
                    <div class="app-icon">üåø</div><div class="app-label">Tabib Digital</div>
                </a>
                <a href="#" onclick="launchApp('19. Restorasi Wastra.html', 'Wastra Alam', 'üß∂')" class="app-card cat-culture">
                    <div class="app-icon">üß∂</div><div class="app-label">Wastra Alam</div>
                </a>
                <a href="#" onclick="launchApp('20. Restorasi Sosial.html', 'Balai Warga', 'ü§ù')" class="app-card cat-sys">
                    <div class="app-icon">ü§ù</div><div class="app-label">Balai Warga</div>
                </a>
                <a href="#" onclick="launchApp('21. Pustaka Peradaban.html', 'Leveling Diri', '‚è´')" class="app-card cat-lingo">
                    <div class="app-icon">‚è´</div><div class="app-label">Leveling Diri</div>
                </a>
                <a href="23. Scanner Nilai Dasar.html" class="app-card cat-doc">
                    <div class="app-icon">üîç</div><div class="app-label">Analisa Dasar</div>
                </a>
                <a href="#" onclick="launchApp('24. Estafet Kemanusiaan.html', 'Codex Manusia', 'üë§')" class="app-card cat-human">
                    <div class="app-icon">üë§</div><div class="app-label">Codex Manusia</div>
                </a>
                <a href="#" onclick="launchApp('25. Menu Ekonomi.html', 'Ekonomi Nilai', 'üí∞')" class="app-card cat-fin">
                    <div class="app-icon">üí∞</div><div class="app-label">Ekonomi Nilai</div>
                </a>
                <a href="#" onclick="launchApp('26. Menu Masa Depan.html', 'Realitas & Masa Depan', 'üíä')" class="app-card cat-future">
                    <div class="app-icon">üíä</div><div class="app-label">Realitas & Masa Depan</div>
                </a>
                <a href="#" onclick="launchApp('27. Menu Hukum Syariat dan Hakikat.html', 'Syariat & Hakikat', '‚öñÔ∏è')" class="app-card cat-edu">
                    <div class="app-icon">‚öñÔ∏è</div><div class="app-label">Syariat & Hakikat</div>
                </a>
                <a href="#" onclick="launchApp('28. Indikator Iman.html', 'Iman Metric', 'üì∂')" class="app-card cat-tools">
                    <div class="app-icon">üì∂</div><div class="app-label">Iman Metric</div>
                </a>
                <a href="29. Pustaka Ajaran Tauhid.html" class="app-card cat-doc">
                    <div class="app-icon">üìÑ</div><div class="app-label">Pustaka Ajaran Tauhid</div>
                </a>
                <a href="#" onclick="launchApp('30. Quantum Vitality.html', 'Quantum Vitality', '‚öõÔ∏è')" class="app-card cat-future">
                    <div class="app-icon">‚öõÔ∏è</div><div class="app-label">Quantum Vitality</div>
                </a>
                <a href="#" onclick="launchApp('31. Holistic Calibration.html', 'Holistic Radar', 'üì°')" class="app-card cat-edu">
                    <div class="app-icon">üì°</div><div class="app-label">Holistic Radar</div>
                </a>
                <a href="#" onclick="launchApp('32. Legacy Hub.html', 'Warisan Generasi', 'üå≥')" class="app-card cat-fin">
                    <div class="app-icon">üå≥</div><div class="app-label">Warisan Generasi</div>
                </a>
                <a href="#" onclick="launchApp('33. Civilization Hub.html', 'Civilization Hub', 'üåç')" class="app-card cat-future">
                    <div class="app-icon">üåç</div><div class="app-label">Civilization Hub</div>
                </a>
                <a href="34.Nusantara Auto-Anchor (POS Mode).html" target="_blank" class="app-card cat-future">
                    <div class="app-icon" style="display: flex; align-items: center; justify-content: center;">
                    <img src="https://nanansuh234.github.io/Sunda-Nuswantara-OS/favicon.png" alt="Icon POS" style="width: 50px; height: 50px;">
                    </div>
                    <div class="app-label">Nusantara Auto-Anchor (POS Mode)</div>
                </a>
                <a href="#" onclick="launchApp('35.Nusantara Savings Simulator.html', 'Simulasi Dinar', 'üí∞')" class="app-card cat-fin">
                    <div class="app-icon">üí∞</div><div class="app-label">Simulasi Tabungan</div>
                </a>
                <a href="#" onclick="launchApp('36.Nusantara Income Generator.html', 'Income Gen', 'üî®')" class="app-card cat-fin" style="border-color: var(--green);">
                    <div class="app-icon">üî®</div><div class="app-label">Income Generator</div>
                </a>
                <a href="#" onclick="launchApp('37. Pusat Strategi Ekonomi.html', 'Pusat Strategi', 'ü§ù')" class="app-card cat-sys">
                    <div class="app-icon">ü§ù</div><div class="app-label">Pusat Strategi Ekonomi</div>
                </a>
                <a href="#" onclick="launchApp('37. Jam Pasir Timer.html', 'Jam Pasir', '‚è≥')" class="app-card cat-sys">
                    <div class="app-icon">‚è≥</div><div class="app-label">Jam Pasir Nusantara</div>
                </a>
                <a href="#" onclick="launchApp('38. Kawi Jawa Kuno.html', 'Prasasti Kawi', 'üóø')" class="app-card cat-sys">
                    <div class="app-icon">üóø</div><div class="app-label">Prasasti Jawa Kawi</div>
                </a>
                <a href="#" onclick="launchApp('39. Pagon Mataram.html', 'Mesin Ketik Pegon', '‚úíÔ∏è')" class="app-card cat-sys">
                    <div class="app-icon">‚úíÔ∏è</div><div class="app-label">Mesin Ketik Pegon</div>
                </a>
                <a href="#" onclick="launchApp('40. Encoder Arsip Keraton.html', 'Encoder Arsip', '‚úíÔ∏è')" class="app-card cat-sys">
                    <div class="app-icon">‚úíÔ∏è</div><div class="app-label">Encoder Arsip Keraton</div>
                </a>
                <a href="#" onclick="launchApp('41. Ancient Astronomy.html', 'Astronomy', 'üïê')" class="app-card cat-sys">
                    <div class="app-icon">üïê</div><div class="app-label">Ancient Astronomy</div>
                </a>
                <a href="#" onclick="launchApp('42. Advanced Systems.html', 'Adv Systems', '‚öõÔ∏è')" class="app-card cat-future">
                    <div class="app-icon">‚öõÔ∏è</div><div class="app-label">Advanced Systems</div>
                </a>
                <a href="#" onclick="launchApp('43. Forbidden Tech.html', 'Forbidden', '‚öõÔ∏è')" class="app-card cat-future">
                    <div class="app-icon">‚öõÔ∏è</div><div class="app-label">Forbidden Tech</div>
                </a>
                <a href="#" onclick="launchApp('44. Gallery.html', 'Browser', 'üñºÔ∏è')" class="app-card cat-tech">
                    <div class="app-icon">üñºÔ∏è</div><div class="app-label">Gallery</div>
                </a>
                <a href="#" onclick="launchApp('45. Media Player.html', 'Gamelan Player', 'üéµ')" class="app-card cat-time">
                    <div class="app-icon">üéµ</div>
                    <div class="app-label">Media Player</div>
                </a>
                <a href="#" onclick="launchApp('46. TV Jadul.html', 'Nuswantara TV', 'üì∫')" class="app-card cat-tech">
                    <div class="app-icon">üì∫</div>
                    <div class="app-label">TV Jadul</div>
                </a>
                <a href="54. Double Anchor System.html" class="app-card cat-doc">
                    <div class="app-icon">‚öñÔ∏è</div><div class="app-label">Double Anchor System</div>
                </a>
                <a href="#" onclick="launchApp('55. Nilai Komoditas.html', 'Daftar Nilai', 'üìö')" class="app-card cat-fin">
                    <div class="app-icon">üìö</div>
                    <div class="app-label">Daftar Nilai Komoditas</div>
                </a>
               <a href="#" onclick="launchApp('56. Sunda Nuswantara Archive.html', 'Nuswantara Archive', 'üìö')" class="app-card cat-fin">
                    <div class="app-icon">üìñ</div>
                    <div class="app-label">SUNDA NUSWANTARA ARCHIVE</div>
                </a> </div> <div style="text-align:center; padding: 20px; font-size:0.6rem; color:#666;">
                SYSTEM READY // FREQUENCY ALIGNED // NANAN SUHENDAR
            </div>
        </div> <div id="app-windows-container">
            </div>

    </div> ```

### ‚öôÔ∏è Tambahan CSS (Biar Taskbar Lebih Aman)

Biar tombol Start gak "lari" ke tengah lagi kalau ada error dikit, tambahkan/update CSS `.taskbar-left` kamu dengan yang ini:

```css
.taskbar-left {
    display: flex; 
    align-items: center; 
    gap: 10px; 
    flex: 1; /* Ini kunci biar dia nekan tray ke kanan */
    width: 100%; /* Paksa lebar penuh di container flexnya */
    overflow: hidden;
}

            <div style="text-align:center; padding: 20px; font-size:0.6rem; color:#666;">
                SYSTEM READY // FREQUENCY ALIGNED // NANAN SUHENDAR
            </div>
        </div>

        <div id="app-windows-container">
            </div>

    </div>

    <div id="startMenu" class="start-menu-popup">
        <div class="start-menu-header">NUSWANTARA OS</div>
        <div class="start-menu-item" onclick="showDashboard(); toggleStartMenu()">
            <span>üí†</span> Ke Dashboard
        </div>
        <div class="start-menu-item" onclick="closeAllApps(); toggleStartMenu()">
            <span>üßπ</span> Tutup Semua App (Clear RAM)
        </div>
        <div class="start-menu-item danger-item" onclick="hardRefresh()">
            <span>üîÑ</span> <b>SYSTEM REFRESH (Fix Bug)</b>
        </div>
    </div>

    <div class="taskbar">
        <div class="taskbar-left">
            <div class="start-button" onclick="toggleStartMenu()" title="Menu Sistem">
                üí†
            </div>
            <div class="task-list" id="task-list">
                </div>
        </div>

        <div class="taskbar-tray">
            <div class="tray-clock-container">
                <div class="tray-time" id="tray-time">00:00:00</div>
                <div class="tray-date" id="tray-date">Loading...</div>
            </div>
        </div>
    </div>

    <script>
        // === LOGIC DATABASE & WAKTU ===
        const months = ["Wiwitan", "Gangga", "Bija", "Trubus", "Teja", "Baskara", "Kartika", "Huma", "Phala", "Lumbung", "Reswara", "Purnaka", "Suwung"];
        const pasarans = ["Legi", "Pahing", "Pon", "Wage", "Kliwon"];
        const saptawara = ["Sukra", "Tumpak", "Radite", "Soma", "Anggara", "Budha", "Respati"]; 
        const phases = ["HENING", "FAJAR", "DUHA", "KARYA", "ISTIWA", "ASAR", "SANDIKALA", "SIREPAN"];

        function updateWidget() {
            const now = new Date();
            document.getElementById('masehi-clock').innerText = "Local : " + now.toLocaleTimeString('id-ID');

            const h = now.getHours();
            const m = now.getMinutes();
            const s = now.getSeconds();
            
            let totalMin = ((h % 12) * 60) + m + (s/60);
            let nHours = totalMin / 90; 
            let dH = Math.floor(nHours) || 8; 
            let remMin = (nHours % 1) * 90;
            let dM = Math.floor(remMin);
            let remSec = (remMin % 1) * 60;
            let dS = Math.floor(remSec);

            let strH = String(dH).padStart(2,'0');
            let strM = String(dM).padStart(2,'0');
            let strS = String(dS).padStart(2,'0');

            document.getElementById('widget-clock').innerText = `${strH}:${strM}`;
            document.getElementById('tray-time').innerText = `${strH}:${strM}:${strS}`;

            const phaseIdx = Math.floor(h / 3); 
            let currentPhase = phases[phaseIdx];
            let cycle = (h >= 6 && h < 18) ? "SIANG" : "MALAM";
            document.getElementById('widget-phase').innerText = `${currentPhase} (${cycle})`;

            let anchor = new Date(now.getFullYear(), 2, 21);
            if (now < anchor) { anchor = new Date(now.getFullYear() - 1, 2, 21); }
            
            const oneDay = 24 * 60 * 60 * 1000;
            let diffDays = Math.floor((now - anchor) / oneDay);
            let mIdx = Math.floor(diffDays / 28);
            let dNus = (diffDays % 28) + 1;
            
            let yearBase = 2025;
            let currentNusYear = now.getFullYear() - yearBase + 1;
            if (now < new Date(now.getFullYear(), 2, 21)) { currentNusYear -= 1; }
            let yearStr = String(Math.max(1, currentNusYear)).padStart(3, '0');

            let monthName = "";
            if (mIdx >= 13) { monthName = "SUWUNG"; dNus = "Eternity"; } 
            else { monthName = months[mIdx]; }

            let baseAbsolute = new Date(2025, 2, 21);
            let diffAbs = Math.floor((now - baseAbsolute) / oneDay);
            let pIdx = (2 + (diffAbs % 5)) % 5;
            if (pIdx < 0) pIdx += 5;
            
            let sIdx = (diffAbs % 7);
            if (sIdx < 0) sIdx += 7;

            let pasaranName = pasarans[pIdx];
            let dayName = saptawara[sIdx];

            document.getElementById('widget-dayname').innerText = dayName.toUpperCase();
            document.getElementById('widget-pasaran').innerText = pasaranName.toUpperCase();
            document.getElementById('widget-fulldate').innerText = `${dNus} ${monthName.toUpperCase()} ${yearStr}`;
            document.getElementById('tray-date').innerText = `${pasaranName}, ${dNus} ${monthName} ${yearStr}`;
        }
        setInterval(updateWidget, 1000);
        updateWidget();

        // === SETTINGS LOGIC ===
        function toggleSettings() {
            document.getElementById('settingsMenu').classList.toggle('active');
        }

        document.addEventListener('click', function(e) {
            const btn = document.querySelector('.settings-btn');
            const menu = document.getElementById('settingsMenu');
            if (!btn.contains(e.target) && !menu.contains(e.target)) {
                menu.classList.remove('active');
            }
        });

        function setWall(type) {
            const body = document.body;
            if (type === 'default') { body.style.backgroundImage = 'none'; } 
            else if (type === 'wall1') { body.style.backgroundImage = "url('https://nanansuh234.github.io/Sunda-Nuswantara-OS/wall1.jpg')"; } 
            else if (type === 'wall2') { body.style.backgroundImage = "url('https://nanansuh234.github.io/Sunda-Nuswantara-OS/wall2.jpg')"; }
            localStorage.setItem('nus_wall', type);
        }

        function setTheme(mode) {
            if (mode === 'light') { document.body.classList.add('light-mode'); } 
            else { document.body.classList.remove('light-mode'); }
            localStorage.setItem('nus_theme', mode);
        }

        // ============================================
        // === PERSISTENT MULTITASKING / TASKBAR LOGIC ===
        // ============================================

        let openApps = []; 
        const MAX_APPS = 6; 

        // Fungsi Load State saat Startup
        window.onload = function() {
            // Load Settings
            const savedWall = localStorage.getItem('nus_wall');
            if (savedWall) setWall(savedWall);
            const savedTheme = localStorage.getItem('nus_theme');
            if (savedTheme) setTheme(savedTheme);

            // Load Apps State (Session Restore)
            const savedApps = localStorage.getItem('nus_open_apps');
            const savedActiveApp = localStorage.getItem('nus_active_app_id');

            if (savedApps) {
                try {
                    openApps = JSON.parse(savedApps);
                    // Re-create windows with AUTO-CLEANER
                    openApps.forEach(app => createAppWindow(app));
                    // Re-render taskbar
                    renderTaskbar();
                    
                    // Restore Active Window
                    if (savedActiveApp && savedActiveApp !== 'dashboard') {
                        // Check if app still exists
                        if (openApps.find(a => a.id === savedActiveApp)) {
                            switchToApp(savedActiveApp);
                        } else if (openApps.length > 0) {
                             switchToApp(openApps[openApps.length-1].id);
                        } else {
                            showDashboard();
                        }
                    } else {
                        showDashboard();
                    }
                } catch(e) {
                    console.log("Error restore session:", e);
                    openApps = []; // Reset if error
                }
            }
        };

        function saveState(activeId) {
            localStorage.setItem('nus_open_apps', JSON.stringify(openApps));
            if(activeId) {
                localStorage.setItem('nus_active_app_id', activeId);
            }
        }

        function launchApp(url, title, icon) {
            const existingApp = openApps.find(app => app.title === title);
            
            if (existingApp) {
                switchToApp(existingApp.id);
            } else {
                if (openApps.length >= MAX_APPS) {
                    closeApp(openApps[0].id); 
                }
                
                const appId = 'app-' + Date.now();
                const appObj = { id: appId, title: title, icon: icon, url: url };
                openApps.push(appObj);
                
                createAppWindow(appObj);
                renderTaskbar();
                switchToApp(appId);
                
                // SAVE STATE
                saveState(appId);
            }
        }

        // === AUTO-CLEANER V2 (FIX SCROLL) ===
        function createAppWindow(app) {
            const container = document.getElementById('app-windows-container');
            if (document.getElementById(app.id)) return; 
            
            const winDiv = document.createElement('div');
            winDiv.id = app.id;
            winDiv.className = 'app-window';
            
            const iframe = document.createElement('iframe');
            iframe.src = app.url;
            iframe.style.width = "100%";
            iframe.style.height = "100%";
            iframe.style.border = "none";
            iframe.style.background = "#050505";

            // SUNTIK CSS PERBAIKAN (SCROLL BAR DIPAKSA MUNCUL)
            iframe.onload = function() {
                try {
                    const childDoc = iframe.contentDocument || iframe.contentWindow.document;
                    const style = childDoc.createElement('style');
                    style.textContent = `
                        /* 1. SEMBUNYIKAN ELEMEN SYSTEM DUPLIKAT */
                        .taskbar, .status-bar, .dock, .settings-btn, #startMenu { display: none !important; }

                        /* 2. PAKSA BODY SUPAYA BISA SCROLL (PENTING!) */
                        html, body {
                            overflow: auto !important; /* Izinkan scroll */
                            height: auto !important;   /* Jangan dikunci tinggi layarnya */
                        }

                        /* 3. KHUSUS APP YANG COPYAN OS (Punya .dashboard-content) */
                        /* Kita buka kuncinya biar dia ngikutin tinggi konten asli */
                        .dashboard-content, #desktop-area {
                            height: auto !important;
                            overflow: visible !important; 
                            padding-bottom: 60px !important; /* Ruang biar konten paling bawah gak ketutup taskbar utama */
                        }
                    `;
                    childDoc.head.appendChild(style);
                } catch (e) {
                    console.log("Auto-cleaner CORS restriction. Scroll fix might not work on local file without server.");
                }
            };

            winDiv.appendChild(iframe);
            container.appendChild(winDiv);
        }

        function renderTaskbar() {
            const taskList = document.getElementById('task-list');
            taskList.innerHTML = ''; 

            openApps.forEach(app => {
                const tab = document.createElement('div');
                tab.className = 'task-tab';
                tab.id = 'tab-' + app.id;
                
                tab.innerHTML = `
                    <span class="task-tab-icon">${app.icon}</span>
                    <span class="task-tab-title">${app.title}</span>
                    <span class="task-close-btn" onclick="event.stopPropagation(); closeApp('${app.id}')">√ó</span>
                `;
                
                tab.onclick = () => switchToApp(app.id);
                taskList.appendChild(tab);
            });
        }

        function switchToApp(appId) {
            document.querySelectorAll('.app-window').forEach(win => win.classList.remove('active'));
            const targetWin = document.getElementById(appId);
            if(targetWin) targetWin.classList.add('active');

            document.querySelectorAll('.task-tab').forEach(tab => tab.classList.remove('active'));
            const activeTab = document.getElementById('tab-' + appId);
            if(activeTab) activeTab.classList.add('active');

            // SAVE STATE
            saveState(appId);
        }

        function closeApp(appId) {
            const win = document.getElementById(appId);
            if(win) win.remove();
            openApps = openApps.filter(app => app.id !== appId);
            renderTaskbar();

            if(openApps.length === 0) {
                showDashboard();
            } else {
                const lastAppId = openApps[openApps.length - 1].id;
                switchToApp(lastAppId);
                saveState(lastAppId);
            }
            
            // SAVE STATE (Empty) if all closed
            if (openApps.length === 0) {
                 localStorage.setItem('nus_open_apps', JSON.stringify([]));
                 localStorage.setItem('nus_active_app_id', 'dashboard');
            }
        }

        function showDashboard() {
            document.querySelectorAll('.app-window').forEach(win => win.classList.remove('active'));
            document.querySelectorAll('.task-tab').forEach(tab => tab.classList.remove('active'));
            
            // SAVE STATE
            localStorage.setItem('nus_active_app_id', 'dashboard');
        }

        // === START MENU LOGIC ===
        function toggleStartMenu() {
            const menu = document.getElementById('startMenu');
            if (menu.style.display === 'block') {
                menu.style.display = 'none';
            } else {
                menu.style.display = 'block';
            }
        }

        // Close menu when clicking outside
        window.onclick = function(event) {
            if (!event.target.matches('.start-button') && !event.target.matches('.start-button *')) {
                const menu = document.getElementById('startMenu');
                if (menu) menu.style.display = 'none';
            }
        }

        // FUNGSI SYSTEM REFRESH
        function hardRefresh() {
            location.reload();
        }

        // FUNGSI TUTUP SEMUA (CLEAN RAM)
        function closeAllApps() {
            document.getElementById('app-windows-container').innerHTML = '';
            openApps = [];
            renderTaskbar();
            showDashboard();
            localStorage.setItem('nus_open_apps', JSON.stringify([]));
        }

    </script>
</body>
</html>





