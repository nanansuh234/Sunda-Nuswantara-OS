<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tartarian Frequency Logbook</title>
    <style>
        body {
            background: #050505; color: #d4af37; font-family: 'Courier New', monospace;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; margin: 0; overflow: hidden;
        }

        h1 { margin: 0; letter-spacing: 3px; font-size: 1.5rem; color: #fff; text-shadow: 0 0 10px #d4af37; }
        
        .main-layout {
            display: flex; gap: 20px; margin-top: 20px;
            align-items: flex-start;
        }

        /* AREA VISUALISASI (KIRI) */
        .visual-area {
            display: flex; flex-direction: column; align-items: center; gap: 10px;
        }

        .plate-box {
            width: 380px; height: 380px;
            border: 8px solid #333; border-radius: 50%;
            background: #000;
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.1);
            position: relative; overflow: hidden;
        }
        
        canvas { display: block; }

        .hz-display {
            background: #111; padding: 10px 20px; border: 1px solid #d4af37;
            font-size: 1.5rem; font-weight: bold; color: #00ffcc;
            min-width: 150px; text-align: center;
        }

        /* AREA KONTROL & CHART (KANAN) */
        .control-panel {
            width: 350px; height: 450px;
            background: #1a1a1a; border: 2px solid #554400;
            padding: 15px; display: flex; flex-direction: column;
            border-radius: 5px;
        }

        .slider-group { margin-bottom: 20px; text-align: center; }
        input[type=range] { width: 100%; accent-color: #d4af37; cursor: pointer; margin-top: 10px; }

        /* TABEL LOGBOOK */
        .logbook {
            flex-grow: 1; border: 1px solid #444; background: #000;
            overflow-y: auto; font-size: 0.8rem;
        }

        table { width: 100%; border-collapse: collapse; }
        th { background: #333; color: #fff; padding: 5px; text-align: left; position: sticky; top: 0; }
        td { padding: 5px; border-bottom: 1px solid #222; color: #888; cursor: pointer; }
        tr:hover td { background: #111; color: #fff; }
        
        /* Highlight Row saat Active */
        tr.active-row td { 
            background: rgba(0, 255, 204, 0.2); 
            color: #00ffcc; font-weight: bold;
            border-left: 3px solid #00ffcc;
        }

        .shape-icon { font-size: 1.2rem; }

        /* BUTTONS */
        .btn-group { display: flex; gap: 5px; margin-top: 10px; }
        button {
            flex-grow: 1; background: #222; border: 1px solid #555; color: #aaa;
            padding: 8px; cursor: pointer; font-family: inherit;
        }
        button:hover { background: #d4af37; color: #000; }

    </style>
</head>
<body>

    <h1>CYMATIC FREQUENCY LOG</h1>
    <div style="font-size:0.8rem; color:#666;">Operator: Nanan | Project: Resonance Reconstruction</div>

    <div class="main-layout">
        
        <div class="visual-area">
            <div class="hz-display" id="hzVal">0.00 Hz</div>
            <div class="plate-box">
                <canvas id="sandCanvas" width="380" height="380"></canvas>
            </div>
            <div style="font-size:0.7rem; color:#555; max-width:300px; text-align:center;">
                *Pola terbentuk saat getaran mencapai "Titik Hening" (Nodes).
            </div>
        </div>

        <div class="control-panel">
            <div class="slider-group">
                <label>FINE TUNING KNOB (Frekuensi)</label>
                <input type="range" id="freqSlider" min="1" max="10" value="1" step="0.05" oninput="updateFreq(this.value)">
            </div>

            <div style="font-weight:bold; color:#d4af37; margin-bottom:5px; border-bottom:1px solid #444;">KNOWN HARMONICS CHART</div>
            
            <div class="logbook">
                <table id="freqTable">
                    <thead>
                        <tr>
                            <th>FREQ (Hz)</th>
                            <th>SHAPE / POLA</th>
                            <th>EFEK</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </div>

            <div class="btn-group">
                <button onclick="setFreq(2)">RESET</button>
                <button onclick="autoScan()">AUTO SCAN</button>
            </div>
        </div>

    </div>

    <script>
        const canvas = document.getElementById('sandCanvas');
        const ctx = canvas.getContext('2d');
        const size = 380;

        // DATA LOGBOOK (Daftar Resonansi Tartaria)
        // Ini contekan buat lo kalau mau rekonstruksi alat aslinya
        const harmonics = [
            { hz: 1.0, shape: "â—‹ (Lingkaran)", desc: "Fundamental / Dasar" },
            { hz: 2.0, shape: "âŒ– (Cross)", desc: "Polaritas Awal" },
            { hz: 3.0, shape: "â–³ (Segitiga)", desc: "Trinity / Keseimbangan" },
            { hz: 4.0, shape: "â–¡ (Kotak)", desc: "Struktur / Pondasi" },
            { hz: 5.0, shape: "â˜† (Bintang 5)", desc: "Pentagram / Manusia" },
            { hz: 6.0, shape: "âœ¡ (Bintang 6)", desc: "Hexagon / Kristal Air" },
            { hz: 7.0, shape: "â€ (Bunga 7)", desc: "Spiritual / Chakra" },
            { hz: 8.0, shape: "âœ³ (Oktagon)", desc: "Infinity Loop" },
            { hz: 9.0, shape: "â‚ (Surya)", desc: "Vortex / 369 Tesla" },
            { hz: 10.0, shape: "ðŸ•¸ (Kompleks)", desc: "Cellular Structure" }
        ];

        // SETUP TABEL
        const tableBody = document.querySelector('#freqTable tbody');
        harmonics.forEach(h => {
            let tr = document.createElement('tr');
            tr.id = `row-${h.hz}`;
            tr.innerHTML = `
                <td>${h.hz.toFixed(2)}</td>
                <td class="shape-icon">${h.shape}</td>
                <td>${h.desc}</td>
            `;
            tr.onclick = () => setFreq(h.hz); // Klik baris buat set frekuensi
            tableBody.appendChild(tr);
        });

        // PARTICLES
        const numParticles = 4000;
        let particles = [];
        for(let i=0; i<numParticles; i++) {
            particles.push({ x: Math.random()*size, y: Math.random()*size });
        }

        let freq = 1.0;
        let isScanning = false;

        function updateFreq(val) {
            freq = parseFloat(val);
            document.getElementById('hzVal').innerText = freq.toFixed(2) + " Hz";
            document.getElementById('freqSlider').value = freq;
            
            highlightTable(freq);
        }

        function setFreq(val) {
            updateFreq(val);
            isScanning = false; // Stop auto scan kalau user klik manual
        }

        function highlightTable(f) {
            // Hapus highlight lama
            document.querySelectorAll('tr').forEach(tr => tr.classList.remove('active-row'));
            
            // Cek kedekatan dengan integer (Toleransi 0.1)
            let rounded = Math.round(f);
            if (Math.abs(f - rounded) < 0.15) {
                let row = document.getElementById(`row-${rounded}.0`); // .0 karena idnya pake float fixed 1.0
                // Coba cari row yang pas (karena 1.0 vs 1)
                if(!row) row = document.getElementById(`row-${rounded}`);
                
                if (row) {
                    row.classList.add('active-row');
                    row.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    document.getElementById('hzVal').style.color = "#00ffcc"; // Hijau Lock
                }
            } else {
                document.getElementById('hzVal').style.color = "#ffaa00"; // Kuning Tuning
            }
        }

        // RUMUS CYMATICS (Chladni)
        function getChladniValue(x, y, m, n) {
            let nx = (x / size) * 2 - 1;
            let ny = (y / size) * 2 - 1;
            let pi = Math.PI;
            // Rumus ini menciptakan nodal lines berdasarkan harmonik m & n
            return Math.cos(n * pi * nx) * Math.cos(m * pi * ny) - 
                   Math.cos(m * pi * nx) * Math.cos(n * pi * ny);
        }

        function animate() {
            // Bersihkan Canvas
            ctx.fillStyle = "rgba(0,0,0,0.3)";
            ctx.fillRect(0, 0, size, size);
            
            // Warna Pasir
            ctx.fillStyle = document.getElementById('hzVal').style.color === "rgb(0, 255, 204)" ? "#00ffcc" : "#d4af37";

            let m = freq; 
            let n = freq; 

            particles.forEach(p => {
                let val = getChladniValue(p.x, p.y, m, n);
                
                // Physics: Partikel "lari" dari getaran
                // Semakin besar val (amplitudo getaran di titik itu), semakin jauh partikel lari
                let moveAmount = Math.abs(val) * 8; 

                // Random jitter (Simulasi getaran plat)
                p.x += (Math.random() - 0.5) * moveAmount;
                p.y += (Math.random() - 0.5) * moveAmount;

                // Batas dinding
                if (p.x < 0) p.x = size;
                if (p.x > size) p.x = 0;
                if (p.y < 0) p.y = size;
                if (p.y > size) p.y = 0;

                ctx.fillRect(p.x, p.y, 1.5, 1.5);
            });

            if(isScanning) {
                let nextF = freq + 0.01;
                if(nextF > 10) nextF = 1;
                updateFreq(nextF);
            }

            requestAnimationFrame(animate);
        }

        function autoScan() {
            isScanning = !isScanning;
        }

        // Start
        updateFreq(2.0);
        animate();

    </script>
</body>
</html>