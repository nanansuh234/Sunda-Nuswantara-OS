<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faraid Legacy Manager</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Rajdhani:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #050505;
            --panel: #111;
            --border: #333;
            --gold: #d4af37;
            --green: #00ff41;
            --blue: #00f3ff;
            --red: #da3633;
            --text: #ccc;
        }

        * { box-sizing: border-box; transition: 0.3s ease; }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Rajdhani', sans-serif;
            margin: 0; padding: 20px;
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh;
        }

        h1 {
            font-family: 'Cinzel', serif;
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 5px; text-align: center;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }

        .subtitle { color: #666; font-size: 0.9rem; margin-bottom: 30px; text-align: center; }

        .container {
            display: grid; grid-template-columns: 1fr 1fr; gap: 30px;
            width: 100%; max-width: 1100px;
        }

        /* CARD */
        .card {
            background: rgba(20, 20, 20, 0.9);
            border: 1px solid var(--border);
            padding: 25px; border-radius: 10px;
        }

        label { display: block; color: var(--gold); margin-bottom: 5px; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px; }
        
        input, select {
            width: 100%; background: #000; border: 1px solid #444; color: #fff;
            padding: 12px; font-family: 'Rajdhani', sans-serif; font-size: 1.1rem;
            margin-bottom: 15px; border-radius: 4px;
        }
        input:focus { border-color: var(--gold); outline: none; }

        .row-input { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }

        /* RESULT SECTION */
        .result-box {
            background: #0d1117; border: 1px solid var(--gold);
            padding: 20px; border-radius: 8px; margin-top: 10px;
        }

        .res-row {
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px dashed #333; padding: 12px 0;
        }
        .res-label { font-size: 0.9rem; color: #aaa; }
        
        .res-val-group { text-align: right; }
        .res-gold { font-weight: bold; font-family: 'Cinzel', serif; color: var(--gold); font-size: 1.2rem; }
        .res-fiat { font-size: 0.8rem; color: #555; display: block; }
        
        /* ADVICE BOX */
        .land-warning {
            margin-top: 20px; padding: 15px; background: rgba(218, 54, 51, 0.1);
            border: 1px solid var(--red); color: #ddd; font-size: 0.9rem; line-height: 1.6;
            border-radius: 6px;
        }
        .warning-title { color: var(--red); font-weight: bold; margin-bottom: 8px; display: flex; align-items: center; gap: 10px; }

        .btn-calc {
            width: 100%; padding: 12px; background: var(--gold); color: #000;
            border: none; font-weight: bold; cursor: pointer; font-size: 1.1rem;
            margin-top: 10px; clip-path: polygon(3% 0, 100% 0, 100% 70%, 97% 100%, 0 100%, 0 30%);
        }
        .btn-calc:hover { background: #fff; box-shadow: 0 0 15px var(--gold); }

        .role-badge {
            font-size: 0.7rem; padding: 2px 8px; border-radius: 4px; margin-left: 5px; text-transform: uppercase;
        }
        .role-male { background: rgba(0, 255, 65, 0.1); color: var(--green); border: 1px solid var(--green); }
        .role-female { background: rgba(0, 243, 255, 0.1); color: var(--blue); border: 1px solid var(--blue); }

        @media (max-width: 800px) { .container { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <h1>FARAID & LEGACY</h1>
    <div class="subtitle">Distribusi Harta Berbasis Nilai Emas & Kedaulatan Tanah</div>

    <div class="container">
        
        <div class="card">
            <div style="background: #1a1a1a; padding: 15px; border-radius: 6px; margin-bottom: 20px; border-left: 3px solid var(--gold);">
                <label>ðŸ’° HARGA EMAS HARI INI (Per Gram)</label>
                <input type="number" id="goldPrice" value="1300000" oninput="calculate()">
                <small style="color:#666; display:block; margin-top:-10px;">*Masukkan harga buyback Antam/Dinar terkini</small>
            </div>

            <label>1. VALUASI TOTAL ASET (Estimasi Rupiah)</label>
            <input type="number" id="totalAsset" placeholder="Nilai Tanah + Rumah + Cash" oninput="calculate()">

            <div class="row-input">
                <div>
                    <label>2. HUTANG / BIAYA</label>
                    <input type="number" id="debt" value="0" oninput="calculate()">
                </div>
                <div>
                    <label>3. WASIAT (Max 1/3)</label>
                    <input type="number" id="wasiat" value="0" oninput="calculate()">
                </div>
            </div>

            <hr style="border:0; border-top:1px solid #333; margin:10px 0 20px 0;">

            <label>4. PEWARIS (YANG MENINGGAL)</label>
            <select id="deceased" onchange="calculate()">
                <option value="husband">Suami (Meninggalkan Istri & Anak)</option>
                <option value="wife">Istri (Meninggalkan Suami & Anak)</option>
            </select>

            <div class="row-input">
                <div>
                    <label>ANAK LAKI-LAKI</label>
                    <input type="number" id="sons" value="1" min="0" oninput="calculate()">
                </div>
                <div>
                    <label>ANAK PEREMPUAN</label>
                    <input type="number" id="daughters" value="1" min="0" oninput="calculate()">
                </div>
            </div>

            <button class="btn-calc" onclick="calculate()">HITUNG NILAI (EMAS)</button>
        </div>

        <div class="card">
            <label style="text-align:center; color:#fff; border-bottom:1px solid #333; padding-bottom:10px;">HASIL DISTRIBUSI</label>
            
            <div class="result-box">
                <div class="res-row">
                    <span class="res-label">Nilai Bersih (Netto):</span>
                    <div class="res-val-group">
                        <div class="res-gold" id="resNetGold">0 gr</div>
                        <span class="res-fiat" id="resNetFiat">Rp 0</span>
                    </div>
                </div>
                
                <div class="res-row">
                    <span class="res-label" id="labelSpouse">Bagian Pasangan:</span>
                    <div class="res-val-group">
                        <div class="res-gold" id="valSpouseGold">0 gr</div>
                        <span class="res-fiat" id="valSpouseFiat">Rp 0</span>
                    </div>
                </div>
            </div>

            <div class="result-box" style="border-color:var(--green); margin-top:20px;">
                <label style="color:var(--green); text-align:center; margin-bottom:10px;">HAK ANAK (ASABAH)</label>
                
                <div class="res-row">
                    <span class="res-label">
                        ðŸ‘¦ Anak Laki-Laki (Per Orang)
                        <br><span class="role-badge role-male">Wajib Estafet Tanah</span>
                    </span>
                    <div class="res-val-group">
                        <div class="res-gold" id="valSonGold">0 gr</div>
                        <span class="res-fiat" id="valSonFiat">Rp 0</span>
                    </div>
                </div>

                <div class="res-row" style="border-bottom:none;">
                    <span class="res-label">
                        ðŸ‘§ Anak Perempuan (Per Orang)
                        <br><span class="role-badge role-female">Hak Nilai (Buyout)</span>
                    </span>
                    <div class="res-val-group">
                        <div class="res-gold" id="valDaughterGold">0 gr</div>
                        <span class="res-fiat" id="valDaughterFiat">Rp 0</span>
                    </div>
                </div>
            </div>

            <div class="land-warning">
                <div class="warning-title">â›” PANTANGAN: JANGAN JUAL TANAH PUSAKA!</div>
                <ul style="margin:0; padding-left:20px;">
                    <li><b>Laki-laki (Khalifah):</b> Haram menjual tanah leluhur demi konsumtif. Wajib melanjutkan pengelolaan aset fisik.</li>
                    <li><b>Perempuan (Rahim):</b> Jika ingin mengambil hak waris, sebaiknya dirembuk untuk <b>dikompensasi (Buyout)</b> dengan Emas/Dinar oleh saudara laki-laki, ATAU tetap menjadi pemegang saham (Syirkah) atas hasil tanah tersebut.</li>
                    <li><b>Jangan Pecah Sertifikat:</b> Memecah tanah kecil-kecil = Membunuh potensi ekonomi aset tersebut.</li>
                </ul>
            </div>

        </div>
    </div>

    <a href="index.html" style="margin-top:30px; color:#666; text-decoration:none; padding:10px 20px; border:1px solid #444; border-radius:20px;">KEMBALI KE MENU</a>

    <script>
        function formatRupiah(num) {
            return "Rp " + num.toFixed(0).replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
        }

        function formatGold(grams) {
            // Konversi ke Dinar (1 Dinar = 4.25 gram emas 22k, atau anggap 4.25 gr 24k untuk simplifikasi nilai murni)
            let dinar = grams / 4.25;
            return grams.toFixed(2) + " gr (" + dinar.toFixed(1) + " Dn)";
        }

        function calculate() {
            // 1. Get Inputs
            let goldPrice = parseFloat(document.getElementById('goldPrice').value) || 1;
            let total = parseFloat(document.getElementById('totalAsset').value) || 0;
            let debt = parseFloat(document.getElementById('debt').value) || 0;
            let wasiat = parseFloat(document.getElementById('wasiat').value) || 0;
            let sons = parseInt(document.getElementById('sons').value) || 0;
            let daughters = parseInt(document.getElementById('daughters').value) || 0;
            let type = document.getElementById('deceased').value;

            // 2. Calculate Net Value (Fiat)
            let afterDebt = total - debt;
            let maxWasiat = afterDebt / 3;
            if (wasiat > maxWasiat) wasiat = maxWasiat;
            let netFiat = afterDebt - wasiat;
            if (netFiat < 0) netFiat = 0;

            // 3. Convert to Gold
            let netGold = netFiat / goldPrice;

            // Update Net Display
            document.getElementById('resNetFiat').innerText = formatRupiah(netFiat);
            document.getElementById('resNetGold').innerText = formatGold(netGold);

            // 4. Spouse Share
            let spouseRatio = (type === 'husband') ? (1/8) : (1/4);
            // Koreksi jika tanpa anak
            if (sons === 0 && daughters === 0) spouseRatio = (type === 'husband') ? (1/4) : (1/2);
            
            let spouseFiat = netFiat * spouseRatio;
            let spouseGold = netGold * spouseRatio;

            let labelSpouse = (type === 'husband') ? "Istri (1/8):" : "Suami (1/4):";
            if (sons === 0 && daughters === 0) labelSpouse = (type === 'husband') ? "Istri (1/4 - No Kids):" : "Suami (1/2 - No Kids):";

            document.getElementById('labelSpouse').innerText = labelSpouse;
            document.getElementById('valSpouseFiat').innerText = formatRupiah(spouseFiat);
            document.getElementById('valSpouseGold').innerText = formatGold(spouseGold);

            // 5. Children Share (Asabah)
            let residueFiat = netFiat - spouseFiat;
            let residueGold = netGold - spouseGold;

            // Total Poin = (Laki x 2) + (Perempuan x 1)
            let totalPoints = (sons * 2) + (daughters * 1);
            
            let sonGold = 0, daughterGold = 0;
            let sonFiat = 0, daughterFiat = 0;

            if (totalPoints > 0) {
                let oneShareGold = residueGold / totalPoints;
                let oneShareFiat = residueFiat / totalPoints;

                sonGold = oneShareGold * 2;
                sonFiat = oneShareFiat * 2;

                daughterGold = oneShareGold * 1;
                daughterFiat = oneShareFiat * 1;
            }

            // Update Anak Display
            document.getElementById('valSonFiat').innerText = formatRupiah(sonFiat);
            document.getElementById('valSonGold').innerText = formatGold(sonGold);

            document.getElementById('valDaughterFiat').innerText = formatRupiah(daughterFiat);
            document.getElementById('valDaughterGold').innerText = formatGold(daughterGold);
        }

        // Init
        calculate();
    </script>

</body>
</html>