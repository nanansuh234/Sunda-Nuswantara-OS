<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Nanan - Full Double Anchor Live</title>
    <style>
        body { font-family: 'Courier New', monospace; background: #05070a; color: #ffcc00; padding: 20px; }
        .container { max-width: 1500px; margin: auto; border: 5px solid #ffcc00; padding: 30px; box-shadow: 0 0 40px rgba(255, 204, 0, 0.5); }
        h1 { text-align: center; color: #fff; text-transform: uppercase; font-size: 2.2em; margin-bottom: 5px; }
        .manifesto { text-align: center; color: #00ffcc; font-size: 1.2em; font-weight: bold; margin-bottom: 25px; border-bottom: 2px solid #333; padding-bottom: 15px; }
        
        table { width: 100%; border-collapse: collapse; background: #0d1117; font-size: 20px; } 
        th, td { border: 2px solid #30363d; padding: 15px; text-align: right; }
        th { background: #1a1f26; color: #fff; text-align: center; font-size: 0.85em; }
        
        .gold-val { color: #ffcc00; font-weight: bold; }
        .silver-val { color: #e0e0e0; font-weight: bold; }
        .reject-m2 { border: 4px solid #ff4d4d !important; box-shadow: inset 0 0 10px #ff4d4d; color: #ff4d4d !important; font-weight: bold; }
        .secured { border: 2px solid #00ffcc !important; color: #00ffcc !important; }
        
        .pair-name { text-align: left; color: #fff; font-weight: bold; display: flex; align-items: center; gap: 10px; }
        .flag { font-size: 1.5em; }
        
        #status-bar { text-align: center; padding: 15px; margin-bottom: 20px; border: 3px dashed #ffcc00; color: #ffcc00; font-size: 1.3em; font-weight: bold; }
        .footer-note { margin-top: 30px; padding: 25px; border: 4px solid #ffcc00; background: rgba(255, 204, 0, 0.1); color: #fff; font-size: 1.4em; line-height: 1.6; text-align: center; }
        .highlight { color: #ffcc00; font-weight: bold; text-decoration: underline; }

        /* Animasi kedip saat harga update */
        @keyframes flash { 0% { color: #fff; } 50% { color: #00ffcc; } 100% { color: inherit; } }
        .updated { animation: flash 0.5s ease; }
    </style>
</head>
<body>

<div class="container">
    <h1>KESETARAAN EMAS & PERAK SEPANJANG MASA</h1>
    <div class="manifesto">DOUBLE ANCHOR (1:27 RATIO) | STANDAR DINAR-DIRHAM | UKURAN MURNI TANPA INJEKSI M2</div>
    
    <div id="status-bar">MENGHUBUNGKAN KE JARINGAN PASAR GLOBAL...</div>

    <table>
        <thead>
            <tr>
                <th>MATA UANG</th>
                <th>RUNNING (USD)</th>
                <th>KESETARAAN EMAS (GRAM)</th>
                <th>KESETARAAN PERAK (GRAM)</th>
                <th>DEVIASI & STATUS</th>
            </tr>
        </thead>
        <tbody id="ratio-table"></tbody>
    </table>

    <div class="footer-note" id="dynamic-footer">
        <span class="highlight">HUKUM KESETARAAN DINAR-DIRHAM:</span><br>
        Jika <span style="color:#ff4d4d">TOLAK FIAT</span> menyala, martabat uang fiat Anda sedang dihancurkan.<br>
        Wajib Pertahankan: <span class="highlight">30% CASH</span> & <span class="highlight">70% NILAI RIIL (FISIK)</span>.<br>
        Gunakan "Ukuran" <span id="footer-anchor-val" class="highlight">Harga Tengah ($---)</span> sebagai benteng pertahanan terakhir!
    </div>
</div>

<script>
    // --- KONFIGURASI DASAR ---
    const baseLow = 2400.00; // Harga Lantai Induk
    const gramPerOz = 31.1035;
    const GOLD_SILVER_RATIO = 27; // Rasio Dinar-Dirham lo

    const flags = {
        "IDR": "ðŸ‡®ðŸ‡©", "SGD": "ðŸ‡¸ðŸ‡¬", "MYR": "ðŸ‡²ðŸ‡¾", "THB": "ðŸ‡¹ðŸ‡­", "PHP": "ðŸ‡µðŸ‡­", "VND": "ðŸ‡»ðŸ‡³",
        "JPY": "ðŸ‡¯ðŸ‡µ", "CNY": "ðŸ‡¨ðŸ‡³", "EUR": "ðŸ‡ªðŸ‡º", "GBP": "ðŸ‡¬ðŸ‡§", "RUB": "ðŸ‡·ðŸ‡º", "SAR": "ðŸ‡¸ðŸ‡¦",
        "INR": "ðŸ‡®ðŸ‡³", "TRY": "ðŸ‡¹ðŸ‡·", "KRW": "ðŸ‡°ðŸ‡·", "AED": "ðŸ‡¦ðŸ‡ª", "BRL": "ðŸ‡§ðŸ‡·", "ZAR": "ðŸ‡¿ðŸ‡¦",
        "AUD": "ðŸ‡¦ðŸ‡º", "CAD": "ðŸ‡¨ðŸ‡¦", "CHF": "ðŸ‡¨ðŸ‡­"
    };

    async function updateRatioEquity() {
        try {
            // 1. Ambil Emas Live (Coingecko)
            const goldRes = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=pax-gold&vs_currencies=usd');
            const goldData = await goldRes.json();
            const goldSpotUSD = goldData['pax-gold'].usd;

            // 2. Logic AUTO ANCHOR (Ikut Induk)
            const goldMidAnchorUSD = (baseLow + goldSpotUSD) / 2;
            const goldGramLiveUSD = goldSpotUSD / gramPerOz;

            // 3. Ambil Kurs Fiat (ER-API)
            const res = await fetch('https://open.er-api.com/v6/latest/USD?t=' + Date.now());
            const data = await res.json();
            const r = data.rates;

            const list = [
                { s: "IDR", n: r.IDR, d: 2 }, { s: "MYR", n: r.MYR, d: 4 }, { s: "SGD", n: r.SGD, d: 4 },
                { s: "THB", n: r.THB, d: 2 }, { s: "VND", n: r.VND, d: 2 }, { s: "PHP", n: r.PHP, d: 2 },
                { s: "JPY", n: r.JPY, d: 2 }, { s: "SAR", n: r.SAR, d: 4 }, { s: "AED", n: r.AED, d: 4 },
                { s: "CNY", n: r.CNY, d: 4 }, { s: "KRW", n: r.KRW, d: 2 }, { s: "EUR", n: 1/r.EUR, d: 4 },
                { s: "GBP", n: 1/r.GBP, d: 4 }, { s: "AUD", n: 1/r.AUD, d: 4 }, { s: "CHF", n: r.CHF, d: 4 },
                { s: "RUB", n: r.RUB, d: 2 }, { s: "TRY", n: r.TRY, d: 4 }, { s: "INR", n: r.INR, d: 2 },
                { s: "BRL", n: r.BRL, d: 4 }, { s: "ZAR", n: r.ZAR, d: 2 }
            ];

            let html = "";
            list.forEach(p => {
                // Simulasi pips biar gerak lincah
                const jitter = 1 + ((Math.random() - 0.5) * 0.0001);
                const liveRate = p.n * jitter;

                const unitToUSD = (p.s === "EUR" || p.s === "GBP" || p.s === "AUD") ? liveRate : (1 / liveRate);
                
                // KESETARAAN GRAM EMAS
                const liveGoldGram = unitToUSD / goldGramLiveUSD;
                
                // KESETARAAN GRAM PERAK (FIX RATIO 1:27)
                const liveSilverGram = liveGoldGram * GOLD_SILVER_RATIO; 
                
                const deviation = (((goldSpotUSD - goldMidAnchorUSD) / goldMidAnchorUSD) * 100).toFixed(4);
                const isRejected = goldSpotUSD > goldMidAnchorUSD;
                const statusClass = isRejected ? "reject-m2" : "secured";

                html += `<tr>
                    <td class="pair-name"><span class="flag">${flags[p.s]}</span> 1 ${p.s}</td>
                    <td class="updated">${liveRate.toFixed(p.d)}</td>
                    <td class="gold-val">${liveGoldGram.toFixed(8)} gr</td>
                    <td class="silver-val">${liveSilverGram.toFixed(7)} gr</td>
                    <td style="text-align:center; font-weight:bold" class="${statusClass}">
                        ${deviation}%<br><span style="font-size:10px">${isRejected ? 'TOLAK FIAT' : 'SECURED'}</span>
                    </td>
                </tr>`;
            });

            document.getElementById('ratio-table').innerHTML = html;
            document.getElementById('status-bar').innerText = "DOUBLE ANCHOR AKTIF | MARKET: $" + goldSpotUSD.toFixed(2) + " | JANGKAR: $" + goldMidAnchorUSD.toFixed(2);
            document.getElementById('footer-anchor-val').innerText = `Harga Tengah ($${goldMidAnchorUSD.toLocaleString(undefined, {minimumFractionDigits: 1, maximumFractionDigits: 1})})`;

        } catch (e) {
            document.getElementById('status-bar').innerText = "MENUNGGU SINKRONISASI DATA PASAR...";
        }
    }

    // Update tiap 15 detik biar gak kena limit
    setInterval(updateRatioEquity, 15000);
    updateRatioEquity();
</script>
</body>
</html>
