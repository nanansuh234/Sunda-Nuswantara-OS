<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Sunda Nuswantara OS - Panel Kesetaraan Nilai Komplit</title>
    <style>
        body { font-family: 'Courier New', monospace; background: #050505; color: #ffcc00; padding: 20px; }
        .container { max-width: 1450px; margin: auto; border: 5px solid #ffcc00; padding: 30px; box-shadow: 0 0 50px rgba(255, 204, 0, 0.3); }
        h1 { text-align: center; color: #fff; text-transform: uppercase; letter-spacing: 5px; margin-bottom: 10px; }
        .sub-header { text-align: center; color: #00ffcc; font-size: 1.2em; margin-bottom: 30px; border-bottom: 1px solid #333; padding-bottom: 15px; }

        /* Anchor Box Baru (Dua Sisi) */
        .anchor-wrapper { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 30px; }
        .main-anchor { text-align: center; background: #1a0000; border: 2px solid #ff4d4d; padding: 20px; }
        .anchor-label { text-transform: uppercase; color: #ff4d4d; letter-spacing: 2px; font-size: 0.9em; margin-bottom: 10px; }
        .anchor-price { font-size: 2.5em; color: #fff; font-weight: bold; text-shadow: 0 0 15px rgba(255, 77, 77, 0.5); }
        .anchor-sub { color: #aaa; font-size: 0.9em; margin-top: 5px; }

        /* Grid Perbandingan */
        .comparison-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
        .panel-box { background: #111; border: 3px solid #ffcc00; padding: 20px; position: relative; }
        .panel-box.value { border-color: #00ffcc; }
        
        .box-title { font-size: 1.5em; font-weight: bold; text-transform: uppercase; margin-bottom: 15px; text-align: center; }
        .box-title.price { color: #ffcc00; }
        .box-title.value { color: #00ffcc; }

        .stat-line { display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 1.1em; border-bottom: 1px dashed #333; padding-bottom: 5px; }
        .stat-label { color: #aaa; }
        .stat-val { font-weight: bold; color: #fff; }

        #status-bar { text-align: center; padding: 10px; margin-bottom: 20px; border: 2px dashed #00ffcc; color: #00ffcc; font-weight: bold; }
        
        .edu-note { background: rgba(0, 255, 204, 0.05); border-left: 10px solid #00ffcc; padding: 20px; color: #fff; line-height: 1.6; font-size: 1.1em; }
        .warning-note { background: rgba(255, 77, 77, 0.05); border-left: 10px solid #ff4d4d; padding: 20px; color: #fff; line-height: 1.6; font-size: 1.1em; margin-top: 20px; }
        
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
        .live-dot { height: 10px; width: 10px; background-color: #ff4d4d; border-radius: 50%; display: inline-block; animation: pulse 1s infinite; }
    </style>
</head>
<body>

<div class="container">
    <h1>PANEL STANDAR KESETARAAN NILAI</h1>
    <div class="sub-header">PROTOKOL RECOVERY EKONOMI MIKRO - SUNDA NUSWANTARA OS</div>

    <div id="status-bar">SINKRONISASI JANGKAR "INDUK" AKTIF...</div>

    <div class="anchor-wrapper">
        <div class="main-anchor">
            <div class="anchor-label">Anchor Harga Dinar (4.25g)</div>
            <div class="anchor-price" id="anchor-idr-dinar">Rp ---</div>
            <div class="anchor-sub">Batas Bawah Harga Uang Besar</div>
        </div>
        <div class="main-anchor" style="border-color: #c0c0c0;">
            <div class="anchor-label" style="color: #c0c0c0;">Anchor Harga Dirham (2.975g)</div>
            <div class="anchor-price" id="anchor-idr-dirham" style="text-shadow: 0 0 15px rgba(192, 192, 192, 0.5);">Rp ---</div>
            <div class="anchor-sub">Batas Bawah Harga Uang Receh</div>
        </div>
    </div>

    <div class="comparison-grid">
        <div class="panel-box">
            <div class="box-title price">1. KESETARAAN HARGA (IDR)</div>
            <div class="stat-line">
                <span class="stat-label">Market Dinar:</span>
                <span class="stat-val" id="market-idr-dinar" style="color:#ffcc00">Rp ---</span>
            </div>
            <div class="stat-line">
                <span class="stat-label">Market Dirham:</span>
                <span class="stat-val" id="market-idr-dirham" style="color:#e0e0e0">Rp ---</span>
            </div>
            <div class="stat-line">
                <span class="stat-label">Selisih vs Anchor:</span>
                <span class="stat-val" id="deviation-val">---%</span>
            </div>
            <div class="stat-line">
                <span class="stat-label">Tujuan Utama:</span>
                <span class="stat-val" style="color:#00ffcc">BENTENG DEFLASI</span>
            </div>
        </div>

        <div class="panel-box value">
            <div class="box-title value">2. KESETARAAN NILAI (RIIL)</div>
            <div class="stat-line">
                <span class="stat-label">Satuan Besar:</span>
                <span class="stat-val">1 DINAR (EMAS)</span>
            </div>
            <div class="stat-line">
                <span class="stat-label">Satuan Receh:</span>
                <span class="stat-val">1 DIRHAM (PERAK)</span>
            </div>
            <div class="stat-line">
                <span class="stat-label">Rasio Tetap:</span>
                <span class="stat-val">1 DINAR = 27 DIRHAM</span>
            </div>
            <div class="stat-line">
                <span class="stat-label">Tujuan Utama:</span>
                <span class="stat-val" style="color:#ff4d4d">LAWAN HIPER-INFLASI</span>
            </div>
        </div>
    </div>

    <div class="edu-section">
        <div class="edu-note">
            <strong>MELEK NILAI (KOMUNITAS MIKRO):</strong><br>
            Dalam komunitas, 1 Dirham dihargai <strong>Rp <span id="edu-dirham-val">---</span></strong> sebagai standar minimum. Jika pedagang luar menawar lebih murah, TOLAK! Gunakan harga ini untuk menjaga daya beli produsen lokal agar tidak tergerus deflasi.
        </div>
        
        <div class="warning-note">
            <strong>DARURAT MONETER:</strong><br>
            Jika Rupiah hancur, kita pindah ke <strong>Kesetaraan Nilai</strong>. Transaksi receh (telur, beras, sayur) menggunakan Dirham. Jangan tukar 1 Dinar Anda dengan uang kertas, tapi pecahlah menjadi <strong>27 Dirham</strong> untuk menjaga perputaran ekonomi di tingkat akar rumput.
        </div>
    </div>
</div>

<script>
    const baseLow = 2400.00; // Lantai Induk
    const gramPerOz = 31.1035;
    const beratDinar = 4.25;    //
    const beratDirham = 2.975;  //
    const ratioDinarDirham = 27; //

    async function syncEquality() {
        try {
            // 1. Ambil Emas Live (PAXG)
            const goldRes = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=pax-gold&vs_currencies=usd');
            const goldData = await goldRes.json();
            const goldSpotUSD = goldData['pax-gold'].usd;

            // 2. Ambil Kurs IDR (ER-API)
            const idrRes = await fetch('https://open.er-api.com/v6/latest/USD?t=' + Date.now());
            const idrData = await idrRes.json();
            const rateIDR = idrData.rates.IDR;

            // 3. LOGIKA INDUK (AUTO ANCHOR)
            const goldMidAnchorUSD = (baseLow + goldSpotUSD) / 2;
            
            // Konversi Dinar (Emas)
            const anchorIDRPerDinar = (goldMidAnchorUSD / gramPerOz) * beratDinar * rateIDR;
            const marketIDRPerDinar = (goldSpotUSD / gramPerOz) * beratDinar * rateIDR;

            // Konversi Dirham (Sesuai Rasio 1:27)
            const anchorIDRPerDirham = anchorIDRPerDinar / ratioDinarDirham;
            const marketIDRPerDirham = marketIDRPerDinar / ratioDinarDirham;

            // Deviasi
            const deviation = (((goldSpotUSD - goldMidAnchorUSD) / goldMidAnchorUSD) * 100).toFixed(4);

            // 4. Update UI
            document.getElementById('anchor-idr-dinar').innerText = "Rp " + anchorIDRPerDinar.toLocaleString('id-ID', {maximumFractionDigits: 0});
            document.getElementById('anchor-idr-dirham').innerText = "Rp " + anchorIDRPerDirham.toLocaleString('id-ID', {maximumFractionDigits: 0});
            
            document.getElementById('market-idr-dinar').innerText = "Rp " + marketIDRPerDinar.toLocaleString('id-ID', {maximumFractionDigits: 0});
            document.getElementById('market-idr-dirham').innerText = "Rp " + marketIDRPerDirham.toLocaleString('id-ID', {maximumFractionDigits: 0});
            
            document.getElementById('edu-dirham-val').innerText = anchorIDRPerDirham.toLocaleString('id-ID', {maximumFractionDigits: 0});
            document.getElementById('deviation-val').innerText = deviation + "%";

            document.getElementById('status-bar').innerHTML = 
                `<span class="live-dot"></span> LIVE SYNC: $${goldSpotUSD.toFixed(2)} | JANGKAR: $${goldMidAnchorUSD.toFixed(2)} | RATIO 1:${ratioDinarDirham}`;

        } catch (e) {
            document.getElementById('status-bar').innerText = "MENUNGGU SINKRONISASI DATA...";
        }
    }

    setInterval(syncEquality, 20000);
    syncEquality();
</script>
</body>
</html>