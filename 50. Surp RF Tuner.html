<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>N-SURP: Signal Modulator</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

        body {
            background: #111;
            color: #00ff41;
            font-family: 'Share Tech Mono', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            /* Texture casing alat jadul */
            background-image: radial-gradient(#222 10%, transparent 10%),
            radial-gradient(#222 10%, transparent 10%);
            background-size: 10px 10px;
            background-position: 0 0, 5px 5px;
            background-color: #050505;
        }

        .device-case {
            width: 700px;
            height: 500px;
            background: #1a1a1a;
            border: 4px solid #333;
            border-radius: 20px;
            box-shadow: inset 0 0 50px #000, 0 0 20px rgba(0,0,0,0.8);
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        /* SCREWS */
        .screw {
            position: absolute; width: 15px; height: 15px;
            background: #111; border-radius: 50%;
            border: 2px solid #444;
            box-shadow: inset 1px 1px 2px #000;
        }
        .tl { top: 15px; left: 15px; }
        .tr { top: 15px; right: 15px; }
        .bl { bottom: 15px; left: 15px; }
        .br { bottom: 15px; right: 15px; }

        /* CRT SCREEN */
        .screen-bezel {
            width: 600px;
            height: 250px;
            background: #000;
            border-radius: 10px; /* CRT Curve */
            border: 4px solid #444;
            box-shadow: inset 0 0 20px #000;
            position: relative;
            overflow: hidden;
            margin-top: 20px;
        }

        canvas {
            display: block;
            width: 100%;
            height: 100%;
            filter: blur(0.5px) contrast(1.2); /* Efek CRT */
        }

        .scanline {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%);
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 10;
        }

        /* CONTROLS AREA */
        .controls-area {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin-top: 30px;
        }

        .knob-group {
            display: flex; flex-direction: column; align-items: center;
        }

        .label {
            font-size: 1.2rem; margin-bottom: 10px; color: #aaa; text-transform: uppercase;
        }

        /* STYLIZED RANGE SLIDERS AS KNOBS */
        input[type=range] {
            -webkit-appearance: none;
            width: 200px;
            height: 10px;
            background: #222;
            border: 1px solid #444;
            border-radius: 5px;
            outline: none;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 30px; height: 30px;
            background: #333;
            border: 2px solid #00ff41;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px #00ff41;
        }

        /* STATUS DISPLAY */
        .status-panel {
            position: absolute;
            top: 20px;
            right: 30px;
            text-align: right;
            z-index: 5;
        }

        .mode-text { font-size: 1rem; color: #00ff41; letter-spacing: 2px; }
        .lock-text { 
            font-size: 2rem; font-weight: bold; color: #ff0040; 
            text-shadow: 0 0 5px red; display: block; margin-top: 5px;
        }
        
        .locked-anim {
            color: #00ffcc !important;
            text-shadow: 0 0 20px #00ffcc !important;
            animation: pulse 0.5s infinite;
        }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

    </style>
</head>
<body>

    <div class="device-case">
        <div class="screw tl"></div><div class="screw tr"></div>
        <div class="screw bl"></div><div class="screw br"></div>

        <div style="width:100%; text-align:left; padding-left:30px; margin-top:10px;">
            <div style="font-size:1.5rem; font-weight:bold; color:#888;">N-SURP <span style="font-size:0.8rem">v2.0</span></div>
            <div style="font-size:0.8rem; color:#555;">SIGNAL UPLINK RESONANCE PROCESSOR</div>
        </div>

        <div class="screen-bezel">
            <div class="scanline"></div>
            <div class="status-panel">
                <div class="mode-text">MURF (Multi-Universal RF)</div>
                <span id="lockStatus" class="lock-text">NO SIGNAL</span>
            </div>
            <canvas id="scope"></canvas>
        </div>

        <div class="controls-area">
            <div class="knob-group">
                <div class="label">FREQUENCY (Hz)</div>
                <input type="range" id="freqControl" min="10" max="100" value="10" oninput="updatePlayer()">
                <div id="freqVal" style="margin-top:5px; color:#00ff41">10 Hz</div>
            </div>

            <div class="knob-group">
                <div class="label">AMPLITUDE (Gain)</div>
                <input type="range" id="ampControl" min="10" max="100" value="10" oninput="updatePlayer()">
                <div id="ampVal" style="margin-top:5px; color:#00ff41">10 %</div>
            </div>
        </div>

        <div style="margin-top:20px; font-size:0.8rem; color:#666;">
            INSTRUCTION: Match the <span style="color:#00ff41">GREEN WAVE</span> to the <span style="color:#ff0040">RED SIGNAL</span>.
        </div>
    </div>

    <script>
        const canvas = document.getElementById('scope');
        const ctx = canvas.getContext('2d');

        // Resize Canvas
        canvas.width = 600;
        canvas.height = 250;
        const cy = canvas.height / 2;

        // TARGET SIGNAL (The "Red" Wave - Randomly Generated)
        // Kita kunci nilainya di awal biar user bisa nyari
        const targetFreq = Math.floor(Math.random() * 80) + 20; // 20 - 100
        const targetAmp = Math.floor(Math.random() * 70) + 30;  // 30 - 100
        
        // PLAYER SIGNAL (The "Green" Wave)
        let playerFreq = 10;
        let playerAmp = 10;

        let time = 0;
        let isLocked = false;

        function updatePlayer() {
            playerFreq = parseInt(document.getElementById('freqControl').value);
            playerAmp = parseInt(document.getElementById('ampControl').value);
            
            document.getElementById('freqVal').innerText = playerFreq + " Hz";
            document.getElementById('ampVal').innerText = playerAmp + " %";
        }

        function checkLock() {
            // Toleransi akurasi (+/- 5 point)
            const freqDiff = Math.abs(targetFreq - playerFreq);
            const ampDiff = Math.abs(targetAmp - playerAmp);

            const statusEl = document.getElementById('lockStatus');

            if (freqDiff < 5 && ampDiff < 8) {
                isLocked = true;
                statusEl.innerText = "SIGNAL LOCKED";
                statusEl.classList.add('locked-anim');
            } else {
                isLocked = false;
                
                // Visual Hint
                if (freqDiff < 15 && ampDiff < 15) {
                    statusEl.innerText = "ACQUIRING...";
                    statusEl.style.color = "yellow";
                    statusEl.classList.remove('locked-anim');
                } else {
                    statusEl.innerText = "NO SIGNAL";
                    statusEl.style.color = "#ff0040";
                    statusEl.classList.remove('locked-anim');
                }
            }
        }

        function drawWave(freq, amp, color, phaseShift, isGhost) {
            ctx.beginPath();
            ctx.lineWidth = isGhost ? 3 : 2;
            ctx.strokeStyle = color;
            
            // Effect Neon Glow
            ctx.shadowBlur = isGhost ? 10 : 5;
            ctx.shadowColor = color;

            for (let x = 0; x < canvas.width; x++) {
                // Rumus Gelombang: y = Sin(x * frequency + time) * amplitude
                // Freq multiplier biar visualnya enak
                let f = freq * 0.002; 
                let y = cy + Math.sin(x * f + time + phaseShift) * amp;
                
                // Sedikit noise buat Target Wave biar kayak sinyal alam
                if (isGhost) {
                    y += Math.sin(x * 0.1 + time) * 2; 
                }

                if (x === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
            ctx.shadowBlur = 0; // Reset glow
        }

        function animate() {
            // Clear Screen (CRT Fade Effect)
            ctx.fillStyle = "rgba(0, 10, 0, 0.3)";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Grid Line
            ctx.strokeStyle = "#112"; ctx.lineWidth = 1;
            ctx.beginPath(); ctx.moveTo(0, cy); ctx.lineTo(canvas.width, cy); ctx.stroke();

            time -= 0.1; // Gelombang jalan ke kiri

            // 1. DRAW TARGET (RED/GHOST)
            // Ini yang harus dikejar. Agak transparan.
            // Saat locked, dia berubah jadi Cyan barengan sama player
            let targetColor = isLocked ? "rgba(0, 255, 204, 0.8)" : "rgba(255, 0, 64, 0.6)";
            drawWave(targetFreq, targetAmp, targetColor, 0, true);

            // 2. DRAW PLAYER (GREEN)
            // Ini yang dikontrol user
            let playerColor = isLocked ? "#00ffcc" : "#00ff41";
            // Kita kasih sedikit phase shift biar keliatan "nyusul" kalau belum lock
            drawWave(playerFreq, playerAmp, playerColor, isLocked ? 0 : 1, false);

            checkLock();
            requestAnimationFrame(animate);
        }

        // Init
        animate();

    </script>
</body>
</html>