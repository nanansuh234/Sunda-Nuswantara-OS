<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Nuswantara Explorer v2.0 - Friendster Mode</title>
    <style>
        :root {
            --win-blue: #0078d7;
            --bg-main: #ffffff;
            --sidebar-bg: rgba(243, 243, 243, 0.7);
            --border: #d2d2d2;
            --text: #333;
            --taskbar-bg: rgba(240, 240, 240, 0.8);
            --hover: rgba(229, 229, 229, 0.5);
            --card-bg: rgba(255, 255, 255, 0.7);
        }

        body.dark-mode {
            --bg-main: #1a1a1a;
            --sidebar-bg: rgba(37, 37, 37, 0.7);
            --border: #444;
            --text: #e0e0e0;
            --taskbar-bg: rgba(17, 17, 17, 0.8);
            --hover: rgba(51, 51, 51, 0.5);
            --card-bg: rgba(0, 0, 0, 0.6);
        }

        body {
            background-color: var(--bg-main);
            color: var(--text);
            font-family: 'Segoe UI', Tahoma, sans-serif;
            margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden;
            background-size: 120%; /* Ukuran lebih besar dikit buat ruang drag */
            background-repeat: no-repeat;
            background-position: 0px 0px;
            transition: background-image 0.3s ease;
            user-select: none; /* Biar gak keganggu block text pas lagi drag */
        }

        body.dragging-bg { cursor: move !important; }

/* --- FIXED SEARCH BOX & TOOLBAR --- */
.toolbar {
    height: 45px; 
    background: var(--bg-main); 
    border-bottom: 1px solid var(--border);
    display: flex; 
    align-items: center; 
    padding: 0 15px; 
    gap: 15px; 
    flex-shrink: 0; 
    z-index: 100;
}

.address-bar { 
    flex: 1; 
    min-width: 100px; /* Biar gak maruk makan tempat */
    border: 1px solid var(--border); 
    padding: 6px 12px; 
    font-size: 0.85rem; 
    color: var(--text); 
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(5px);
    border-radius: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.search-box {
    width: 250px; 
    min-width: 150px; /* Kuncinya di sini biar gak hilang */
    border: 1px solid var(--win-blue); 
    padding: 5px 10px;
    display: flex; 
    align-items: center; 
    gap: 10px; 
    background: var(--card-bg); /* Biar ngikutin tema glass */
    border-radius: 4px;
    backdrop-filter: blur(10px);
}

.search-box input {
    border: none; 
    outline: none; 
    background: none; 
    width: 100%; 
    color: var(--text); /* Biar teksnya kelihatan di dark/light mode */
    font-size: 0.85rem;
}

.search-box input::placeholder {
    color: var(--text);
    opacity: 0.5;
}

        /* --- LAYOUT --- */
        .explorer-container { display: flex; flex: 1; overflow: hidden; position: relative; }
        
        .sidebar { 
            width: 250px; background: var(--sidebar-bg); 
            backdrop-filter: blur(15px); border-right: 1px solid var(--border); 
            font-size: 0.85rem; display: flex; flex-direction: column;
        }

        .sidebar-scroll { flex: 1; overflow-y: auto; padding-top: 10px; }
        .sidebar-scroll::-webkit-scrollbar { width: 4px; }
        .sidebar-scroll::-webkit-scrollbar-thumb { background: var(--win-blue); border-radius: 10px; }

        .nav-group { 
            margin: 5px 10px 15px 10px; border: 1px solid var(--border); 
            border-radius: 4px; overflow: hidden; background: rgba(255,255,255,0.1);
        }
        .nav-title { padding: 5px 15px; font-weight: bold; font-size: 0.75rem; color: var(--win-blue); background: rgba(0,0,0,0.05); }
        .nav-item { padding: 8px 15px; display: flex; align-items: center; gap: 10px; cursor: pointer; transition: 0.1s; color: var(--text); }
        .nav-item:hover { background: var(--hover); }
        .nav-item.active { background: var(--win-blue) !important; color: #fff !important; }

        .explorer-view { 
            flex: 1; padding: 20px; overflow-y: auto; 
            background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(3px);
        }

        .view-section-title { font-size: 0.9rem; margin-bottom: 15px; color: var(--win-blue); border-bottom: 1px solid var(--border); padding-bottom: 5px; font-weight: bold; text-shadow: 0 0 10px rgba(255,255,255,0.5); }
        .grid-layout { display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 15px; }
        
        .item-card { 
            display: flex; flex-direction: column; align-items: center; text-align: center; 
            cursor: pointer; padding: 12px; border-radius: 8px; background: var(--card-bg);
            backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); transition: 0.2s;
        }
        .item-card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.3); background: var(--win-blue); color: #fff; }
        .item-icon { font-size: 2.5rem; margin-bottom: 8px; }
        .item-label { font-size: 0.75rem; font-weight: 500; }

        /* --- TASKBAR --- */
        .taskbar {
            height: 45px; background: var(--taskbar-bg); border-top: 1px solid var(--border);
            display: flex; align-items: center; padding: 0 10px; z-index: 2000; flex-shrink: 0; backdrop-filter: blur(20px);
        }
        .start-btn {
            background: var(--win-blue); color: #fff; border: none; padding: 8px 18px; 
            font-weight: bold; border-radius: 3px; cursor: pointer; display: flex; align-items: center; gap: 8px;
        }

        #startMenuPopup {
            display: none; position: fixed; bottom: 55px; left: 10px; width: 280px; 
            background: var(--sidebar-bg); backdrop-filter: blur(20px); border: 2px solid var(--win-blue);
            box-shadow: 0 0 30px rgba(0,0,0,0.5); border-radius: 8px; z-index: 9999;
        }
        .menu-item { padding: 12px 15px; font-size: 0.85rem; cursor: pointer; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid var(--border); color: var(--text); }
        .menu-item:hover { background: var(--win-blue); color: #fff; }

        .theme-mode-btn {
            margin-left: auto; display: flex; align-items: center; gap: 15px; 
            background: rgba(0,0,0,0.1); padding: 5px 15px; border-radius: 20px; font-size: 0.8rem;
            color: var(--text); font-weight: bold;
        }

        .hidden { display: none !important; }
        #bgInput { display: none; }
    </style>
</head>
<body id="mainBody">

    <div class="toolbar">
        <div style="display:flex; gap:5px;">
            <button class="btn-nav" id="btnBack" onclick="goBack()" disabled>â¬…</button>
            <button class="btn-nav" id="btnForward" onclick="goForward()" disabled>â¡</button>
        </div>
        <div class="address-bar" id="pathDisp">ğŸ“ This PC > Devices and drives</div>
        <div class="search-box">
            ğŸ” <input type="text" placeholder="Cari di Nuswantara..." oninput="search(this.value)" style="border:none; outline:none; background:none; width:100%; color:inherit;">
        </div>
    </div>

    <div class="explorer-container">
        <div class="sidebar">
            <div class="sidebar-scroll">
                <div class="nav-group">
                    <div class="nav-title">Quick access</div>
                    <div class="nav-item" id="nav-all" onclick="navigate('apps', 'all', true, this)">â­ Semua Aplikasi</div>
                    <div class="nav-item" onclick="parent.showDashboard()">ğŸ–¥ï¸ Desktop</div>
                </div>

                <div class="nav-group">
                    <div class="nav-title">Sistem OS</div>
                    <div class="nav-item active" id="nav-root" onclick="navigate('root', 'all', true, this)">ğŸ’» This PC</div>
                </div>

                <div class="nav-group">
                <div class="nav-title">Kategori Berkas</div>
                <div class="nav-item" id="cat-future" onclick="navigate('apps', 'cat-future', true, this)" style="padding-left:35px;">ğŸ“ Astronomi</div>
                <div class="nav-item" id="cat-human" onclick="navigate('apps', 'cat-human', true, this)" style="padding-left:35px;">ğŸ“ Kemanusiaan</div>
                <div class="nav-item" id="nav-fin" onclick="navigate('apps', 'cat-fin', true, this)" style="padding-left:35px;">ğŸ“ Ekonomi</div>
                <div class="nav-item" id="cat-doc" onclick="navigate('apps', 'cat-doc', true, this)" style="padding-left:35px;">ğŸ“ Arsip Dokumen</div>
                <div class="nav-item" id="cat-tech" onclick="navigate('apps', 'cat-tech', true, this)" style="padding-left:35px;">ğŸ“ Teknologi</div>
                <div class="nav-item" id="cat-time" onclick="navigate('apps', 'cat-time', true, this)" style="padding-left:35px;">ğŸ“ Waktu dan Tanggal</div>
                <div class="nav-item" id="cat-sys" onclick="navigate('apps', 'cat-sys', true, this)" style="padding-left:35px;">ğŸ“ Sistem</div>
                <div class="nav-item" id="cat-edu" onclick="navigate('apps', 'cat-edu', true, this)" style="padding-left:35px;">ğŸ“ Arsip Edukasi</div>
                <div class="nav-item" id="cat-tools" onclick="navigate('apps', 'cat-tools', true, this)" style="padding-left:35px;">ğŸ“ Aplikasi Peralatan</div>
                <div class="nav-item" id="cat-lingo" onclick="navigate('apps', 'cat-lingo', true, this)" style="padding-left:35px;">ğŸ“ Bahasa</div>
                <div class="nav-item" id="cat-culture" onclick="navigate('apps', 'cat-culture', true, this)" style="padding-left:35px;">ğŸ“ Budaya</div>
                <div class="nav-item" id="cat-nature" onclick="navigate('apps', 'cat-nature', true, this)" style="padding-left:35px;">ğŸ“ Alami</div>
                <div class="nav-item" id="cat-blue" onclick="navigate('apps', 'cat-blue', true, this)" style="padding-left:35px;">ğŸ“ Arsip Nilai</div>
                </div>
            </div>
        </div>

        <div class="explorer-view" id="scrollArea">
            <div id="driveView">
                <div class="view-section-title">Devices and drives (2)</div>
                <div class="grid-layout">
                    <div class="item-card" onclick="navigate('apps', 'all', true, document.getElementById('nav-all'))">
                        <div class="item-icon">ğŸ’¾</div>
                        <div class="item-label">System (C:)</div>
                    </div>
                    <div class="item-card" onclick="navigate('apps', 'cat-blue', true, document.getElementById('cat-blue'))">
                        <div class="item-icon">ğŸ’¾</div>
                        <div class="item-label">Arsip Nilai (E:)</div>
                    </div>
                </div>
            </div>

            <div id="appView" class="hidden">
                <div class="view-section-title" id="folderTitle">Applications</div>
                <div class="grid-layout" id="appGrid"></div>
            </div>
        </div>
    </div>

    <div id="startMenuPopup">
        <div style="background:var(--win-blue); color:white; padding:10px; font-weight:bold; font-size:0.8rem;">NUSWANTARA SETTINGS</div>
        <div class="menu-item" onclick="document.getElementById('bgInput').click()"><span>ğŸ–¼ï¸</span> Ganti Wall (Friendster Mode)</div>
        <div class="menu-item" onclick="resetBG()"><span>ğŸ”„</span> Reset Posisi & Gambar</div>
        <div class="menu-item" onclick="location.reload();"><span>ğŸ”„</span> Refresh Explorer</div>
    </div>

    <input type="file" id="bgInput" accept="image/*" onchange="changeBG(event)">

    <div class="taskbar">
        <button class="start-btn" onclick="toggleStart()">
            <span>ğŸ’ </span> START
        </button>
        <div class="theme-mode-btn">
            <span onclick="toggleTheme()" style="cursor:pointer">ğŸŒ“ Mode</span>
            <span onclick="document.getElementById('bgInput').click()" style="cursor:pointer">ğŸ–¼ï¸ Wall</span>
        </div>
    </div>

    <script>
        const appDatabase = [
    { url: 'Readme.html', label: 'Tentang', icon: 'â„¹ï¸', cat: 'cat-time' },
    { url: 'kesetaraan harga emas perak.html', label: 'Kesetaraan Harga Emas dan Perak', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'kesetaraan nilai.html', label: 'Kesetaraan Nilai', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'persamaan nilai komoditas.html', label: 'Persamaan Nilai tanpa Alat Tukar', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'kesetaraan harga anti deflasi.html', label: 'Kesetaraan Harga Anti Deflasi', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'protokol uang emas dan perak.html', label: 'Protokol Aturan Uang Emas dan Perak', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'jebakan standar dollar.html', label: 'Jebakan Standar Dolar', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'solusi anti ekonomi elit tanpa dolar.html', label: 'Solusi Ekonomi Elit Tanda Dolar/Fiat', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'jantung ekonomi micro.html', label: 'Jantung Ekonomi Micro', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'protokol ekonomi micro darurat likuiditas.html', label: 'Protokol Ekonomi Micro Darurat', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'nilai dan jasa yang layak emas.html', label: 'Nilai dan Jasa yang Layak di Bayar Emas atau Perak', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'alasan kita jangan jadi konsumen atas uang.html', label: '50 Alasan kita jangan sampai jadi Konsumen atas Uang', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'gerakan ekonomi rakyat.html', label: '50 Gerakan Ekonomi Rakyat', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'solusi ekonomi rakyat.html', label: '50 Solusi Ekonomi Rakyat', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'panduan kedaulatan ekonomi mikro dengan uang receh.html', label: '50 Panduan Kedaulatan Ekonomi Mikro dengan uang Receh', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'panduan bebas finansial real.html', label: '50 Panduan Bebas Finansial Real', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'protokol audit harga wajar tolak m2.html', label: '50 Protokol Audit Harga Wajar Tolak M2', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'restorasi mundur ke abad awal milenium.html', label: '50 Restorasi Mundur ke Abad Awal Milenium', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'kuliner 90an dan rutinitasnya.html', label: '50 Kuliner 90an dan Rutinitasnya.html', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'survival kit 90s dan sumber ekonomi anak.html', label: '50 Survival kit 90s dan Sumber ekonomi Anak', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'restorasi profesi teknologi kuno.html', label: '50 Restorasi Profesi Teknologi Kuno', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'bursa kerja era sunda nuswantara.html', label: '50 Bursa Kerja Era Sunda Nuswantara', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'restorasi teknologi sederhana mandiri.html', label: '50 Restorasi Teknologi Sederhana Mandiri', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'restorasi alat produksi berdaulat rakyat.html', label: '50 Restorasi Alat Produksi Berdaulat Rakyat', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'bahan alat industri rongsok sederhana.html', label: '50 Bahan Alat Industri Rongsok Sederhana', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'restorarasi free energy dan kapasitas outputnya.html', label: '50 Restorarasi Free Energy dan Kapasitas Outputnya', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'restorasi kedaulatan nilai.html', label: '50 Restorasi Kedaulatan Nilai', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'manifestor tata ruang dan alam.html', label: 'Manifestor Tata Ruang dan Alam', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'sirkulasi element prequesi bumi.html', label: 'Sirkulasi Element Frequesi Bumi', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'DIY prequensi bumi untuk Kasur Tidur.html', label: 'DIY Frequensi Bumi untuk Kasur Tidur', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'bio prequensi hening.html', label: 'Bio Frequensi Hening', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'bahan bangunan alami ramah lingkungan.html', label: 'Bahan Bangunan Alami Ramah Lingkungan', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'teknologi perekat konstruksi alami.html', label: 'Teknologi Perekat Konstruksi Alami', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'pengolahan kapur sebagai perekat alami.html', label: 'Pengolahan Kapur Sebagai Perekat Alami', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'bahan perekat alami tambahan.html', label: 'Bahan Perekat Alami Tambahan', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'resep pembuatan bata dan genteng majapahit.html', label: 'Resep Pembuatan Bata dan Genteng Majapahit', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'tehnik paku bumi dan anti tanah bergerak.html', label: 'Tehnik Paku Bumi dan Anti Tanah Bergerak', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'konsep anti tanah gerak dan longsor.html', label: 'Konsep Anti Tanah Gerak dan Longsor', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'tata ruag bio mekanik.html', label: 'Tata Ruang Bio Mekanik', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'konsep tata ruang anti banjir dan logsor.html', label: 'Konsep Tata Ruang Anti Banjir dan Logsor', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'metode susun modular.html', label: 'Metode Susun Modular', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'printer 3d tartaria.html', label: 'Printer 3D Tartaria', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'blue print 3d modular.html', label: 'Blue Print 3D Modular', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'tahapan pembangunan bangunan interlocking.html', label: 'Tahapan Pembangunan Bangunan Interlocking', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'teknik arsitektur tarumanagara.html', label: 'Teknik Arsitektur Tarumanagara', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'visualisasi denah prequensi.html', label: 'Visualisasi Denah Frequensi', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'resonansi element dan hunian.html', label: 'Resonansi Element dan Hunian', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'cara rakit antena frequensi bumi.html', label: 'Cara Rakit Antena Frequensi Bumi', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'bio sensor flora sebagai tanaman peringatan dini bencana.html', label: 'Bio Sensor Flora Sebagai Tanaman Peringatan Dini Bencana', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: 'detektor gas alkimia.html', label: 'Detektor Gas Alkimia', icon: 'ğŸ“', cat: 'cat-blue' },
    { url: '01 Jam Sunda Nuswantara.html', label: 'Jam Utama', icon: 'ğŸ•', cat: 'cat-time' },
    { url: '02. Kalender Sunda Nuswantara.html', label: 'Kalender', icon: 'ğŸ“…', cat: 'cat-time' },
    { url: '03. Jadwal Shalat Sunda Nuswantara.html', label: 'Shalat', icon: 'ğŸ•Œ', cat: 'cat-culture' },
    { url: '04. Converter Waktu & Tanggal Ke Sunda Nuswantara.html', label: 'Konverter', icon: 'ğŸ”„', cat: 'cat-tools' },
    { url: '05. Satuan Nilai Sunda Nuswantara.html', label: 'Satuan Nilai', icon: 'âš–ï¸', cat: 'cat-edu' },
    { url: '06. Contoh Jadwal Kegiatan Sunda Nuswantara.html', label: 'Jadwal', icon: 'ğŸ“', cat: 'cat-edu' },
    { url: '07. Panduan Manual Contoh Pertanian.html', label: 'Lumbung', icon: 'ğŸŒ¾', cat: 'cat-fin' },
    { url: '08. Panduan Manual Contoh Produktifitas dan Karya.html', label: 'Karya', icon: 'ğŸ”¨', cat: 'cat-fin' },
    { url: '09. Aksara Hanacaraka.html', label: 'Hanacaraka', icon: 'ê¦²', cat: 'cat-lingo' },
    { url: '10. Aksara Sunda Kuno.html', label: 'Sunda Kuno', icon: 'á®Š', cat: 'cat-lingo' },
    { url: '11. Rekonstruksi Bahasa Sunda Kuno.html', label: 'Kamus', icon: 'ğŸ“–', cat: 'cat-lingo' },
    { url: '12. Sunda Kuno.html', label: 'Olaxara', icon: 'âœ’ï¸', cat: 'cat-lingo' },
    { url: 'Tools.html', label: 'Logic Engine', icon: 'ğŸ§ ', cat: 'cat-lingo' },
    { url: '13. Kumpulan Renungan.html', label: 'Renungan', icon: 'ğŸ“š', cat: 'cat-edu' },
    { url: '14. Terapi Cahaya Malam.html', label: 'Terapi Sirep', icon: 'ğŸ•¯ï¸', cat: 'cat-tech' },
    { url: '15. Appraisal Scanner.html', label: 'Appraisal', icon: 'ğŸ”', cat: 'cat-edu' },
    { url: '16. Restorasi Pangan.html', label: 'Teknologi Pangan', icon: 'ğŸ¯', cat: 'cat-edu' },
    { url: '17. Restorasi Arsitektur.html', label: 'Arsitektur', icon: 'ğŸ›–', cat: 'cat-edu' },
    { url: '18. Restorasi Kesehatan.html', label: 'Tabib Digital', icon: 'ğŸŒ¿', cat: 'cat-edu' },
    { url: '19. Restorasi Wastra.html', label: 'Wastra Alam', icon: 'ğŸ§¶', cat: 'cat-nature' },
    { url: '20. Restorasi Sosial.html', label: 'Balai Warga', icon: 'ğŸ¤', cat: 'cat-human' },
    { url: '21. Pustaka Peradaban.html', label: 'Leveling Diri', icon: 'â«', cat: 'cat-human' },
    { url: '23. Scanner Nilai Dasar.html', label: 'Analisa Dasar', icon: 'ğŸ”', cat: 'cat-edu' },
    { url: '24. Estafet Kemanusiaan.html', label: 'Codex Manusia', icon: 'ğŸ‘¤', cat: 'cat-human' },
    { url: '25. Menu Ekonomi.html', label: 'Ekonomi Nilai', icon: 'ğŸ’°', cat: 'cat-fin' },
    { url: '26. Menu Masa Depan.html', label: 'Realitas & Masa Depan', icon: 'ğŸ’Š', cat: 'cat-fin' },
    { url: '27. Menu Hukum Syariat dan Hakikat.html', label: 'Syariat & Hakikat', icon: 'âš–ï¸', cat: 'cat-culture' },
    { url: '28. Indikator Iman.html', label: 'Iman Metric', icon: 'ğŸ“¶', cat: 'cat-culture' },
    { url: '29. Pustaka Ajaran Tauhid.html', label: 'Pustaka Ajaran Tauhid', icon: 'ğŸ“„', cat: 'cat-culture' },
    { url: '30. Quantum Vitality.html', label: 'Quantum Vitality', icon: 'âš›ï¸', cat: 'cat-human' },
    { url: '31. Holistic Calibration.html', label: 'Holistic Radar', icon: 'ğŸ“¡', cat: 'cat-human' },
    { url: '32. Legacy Hub.html', label: 'Warisan Generasi', icon: 'ğŸŒ³', cat: 'cat-human' },
    { url: '33. Civilization Hub.html', label: 'Civilization Hub', icon: 'ğŸŒ', cat: 'cat-human' },
    { url: '34.Nusantara Auto-Anchor (POS Mode).html', label: 'Auto-Anchor POS', icon: 'âš“', cat: 'cat-fin' },
    { url: '35.Nusantara Savings Simulator.html', label: 'Simulasi Tabungan', icon: 'ğŸ’°', cat: 'cat-fin' },
    { url: '36.Nusantara Income Generator.html', label: 'Income Generator', icon: 'ğŸ”¨', cat: 'cat-fin' },
    { url: '37. Pusat Strategi Ekonomi.html', label: 'Pusat Strategi Ekonomi', icon: 'ğŸ¤', cat: 'cat-fin' },
    { url: '37. Jam Pasir Timer.html', label: 'Jam Pasir Nusantara', icon: 'â³', cat: 'cat-tools' },
    { url: '38. Kawi Jawa Kuno.html', label: 'Prasasti Jawa Kawi', icon: 'ğŸ—¿', cat: 'cat-lingo' },
    { url: '39. Pagon Mataram.html', label: 'Mesin Ketik Pegon', icon: 'âœ’ï¸', cat: 'cat-culture' },
    { url: '40. Encoder Arsip Keraton.html', label: 'Encoder Arsip Keraton', icon: 'âœ’ï¸', cat: 'cat-lingo' },
    { url: '41. Ancient Astronomy.html', label: 'Ancient Astronomy', icon: 'ğŸ•', cat: 'cat-future' },
    { url: '42. Advanced Systems.html', label: 'Advanced Systems', icon: 'âš›ï¸', cat: 'cat-tech' },
    { url: '43. Forbidden Tech.html', label: 'Forbidden Tech', icon: 'âš›ï¸', cat: 'cat-tech' },
    { url: '44. Gallery.html', label: 'Gallery', icon: 'ğŸ–¼ï¸', cat: 'cat-doc' },
    { url: 'NS-Pad.html', label: 'Nuswantara Notepad', icon: 'ğŸ“–', cat: 'cat-doc' },
    { url: '01 dokumen viewer.html', label: 'Dokumen Viewer', icon: 'ğŸ“–', cat: 'cat-doc' },
    { url: 'NS-Paint.html', label: 'Nuswantara Paint', icon: 'âœ’ï¸', cat: 'cat-doc' },
    { url: '45. Media Player.html', label: 'Media Player', icon: 'ğŸµ', cat: 'cat-doc' },
    { url: '46. TV Jadul.html', label: 'TV Jadul', icon: 'ğŸ“º', cat: 'cat-doc' },
    { url: '54. Double Anchor System.html', label: 'Double Anchor System', icon: 'âš–ï¸', cat: 'cat-fin' },
    { url: '55. Nilai Komoditas.html', label: 'Daftar Nilai Komoditas', icon: 'ğŸ“š', cat: 'cat-fin' },
    { url: '56. Sunda Nuswantara Archive.html', label: 'SUNDA NUSWANTARA ARCHIVE', icon: 'ğŸ“–', cat: 'cat-human' },
    { url: '62. Menu Ether Tech.html', label: 'ETHER TECH & BLUEPRINTS', icon: 'âš¡', cat: 'cat-tech' },
    { url: 'kompas.html', label: 'NAVIGASI TAKTIS', icon: 'ğŸ§­', cat: 'cat-tools' },
    { url: 'petajalur.html', label: 'BUAT PETA JALUR', icon: 'ğŸŒ', cat: 'cat-tools' },
    { url: 'DecentralizedID.html', label: 'Cetak Data Personal', icon: 'ğŸ“„', cat: 'cat-sys' },
    { url: 'WAenigma.html', label: 'WAenigma', icon: 'âœ’ï¸', cat: 'cat-sys' },
    { url: 'Picmigma.html', label: 'Picmigma', icon: 'ğŸ”', cat: 'cat-sys' },
    { url: 'morsenigma.html', label: 'Morsenigma', icon: 'ğŸ”Š', cat: 'cat-sys' },
    { url: 'stegavault.html', label: 'Stegavault', icon: 'ğŸ—¿', cat: 'cat-sys' },
    { url: 'sonicmind.html', label: 'Sonicmind', icon: 'ğŸ”Š', cat: 'cat-sys' },
    { url: 'sonicmindtransfer.html', label: 'Sonic Mind Transfer', icon: 'ğŸ”Š', cat: 'cat-sys' },
    { url: 'https://unorganically-flangeless-parthenia.ngrok-free.dev/', label: 'Genesis Chat', icon: 'ğŸ’¬', cat: 'cat-tools' },
    { url: 'genesis manager.html', label: 'Genesis Local File Manager', icon: 'ğŸ“‚', cat: 'cat-tools' },
    { url: 'mtfzonetradingsystem.html', label: 'MTF Zone Trading System', icon: 'ğŸ“ˆ', cat: 'cat-fin' },
    { url: 'Nmail.html', label: 'N-Mail', icon: 'âœ‰ï¸', cat: 'cat-tools' },
    { url: 'SMS.html', label: 'Inbox SMS', icon: 'ğŸ“‚', cat: 'cat-tools' },
    { url: '56. Nuswantara Hub.html', label: 'Nuswantara Hub & Tools', icon: 'ğŸ‘¤', cat: 'cat-tools' },
    { url: 'Bio Medic.html', label: 'Bio Medic Hacking', icon: 'ğŸ’Š', cat: 'cat-tech' },
    { url: 'Khusus Insan Dewasa Baligh.html', label: 'Dewasa Baligh', icon: 'â¤ï¸â€ğŸ”¥', cat: 'cat-human' },
    { url: 'modelmap1.html', label: 'Model Map1', icon: 'ğŸŒ', cat: 'cat-tools' },
    { url: 'modelmap2.html', label: 'Model Map2', icon: 'ğŸŒ', cat: 'cat-tools' },
    { url: 'modelmap3.html', label: 'Model Map3', icon: 'ğŸŒ', cat: 'cat-tools' },
    { url: 'jam kerja dan belajar.html', label: 'Sinkronisasi Jam Kerja dan Belajar', icon: 'ğŸ“–', cat: 'cat-culture' },
    { url: 'jadwal ibadah puasa sunda nuswantara.html', label: 'Sinkronisasi Jam Ibadah Dan Rutinitas Bulan Puasa', icon: 'ğŸ“–', cat: 'cat-culture' },
    { url: 'manual jam sunda nuswantara.html', label: 'Manual Penggunaan Jam Sunda Nuswantara', icon: 'ğŸ“–', cat: 'cat-culture' },
    { url: 'manual kalender nuswantara.html', label: 'Manual Penggunaan Kalender Sunda Nuswantara', icon: 'ğŸ“–', cat: 'cat-culture' },
    { url: 'kalkulator lahan padi.html', label: 'Kalkulator Kebutuhan Lahan Padi', icon: 'ğŸŒ¾', cat: 'cat-edu' },
    { url: 'kalkulator jumlah ternak.html', label: 'Kalkulator Management Ternak', icon: 'ğŸ›–', cat: 'cat-edu' },
    { url: '05 simulator tuning frequensi.html', label: 'Simulator Tuning Frequensi', icon: 'ğŸ“¡', cat: 'cat-edu' },
    { url: '04 pusaka digtal arsitektur nuswantara.html', label: 'Pusaka Digtal Arsitektur Nuswantara', icon: 'ğŸ›–', cat: 'cat-edu' },
    { url: '03 Vastu-Purusha Mandala.html', label: 'Vastu-Purusha Mandala Denah Maker', icon: 'ğŸ›–', cat: 'cat-edu' },
    { url: '02 gomati scale calculator.html', label: 'Gomati Scale Calculator', icon: 'ğŸ›–', cat: 'cat-edu' },
    { url: 'kalkulator panen ikan dan sayur.html', label: 'Kalkulator Kebutuhan Protein Ikan dan Sayur', icon: 'ğŸ¯', cat: 'cat-edu' }
      ];

        let historyStack = [{target: 'root', cat: 'all'}];
        let curIdx = 0;
        let bgPosX = 0, bgPosY = 0, isDragging = false, startX, startY;

        // --- BACKGROUND DRAG SYSTEM ---
        window.addEventListener('mousedown', (e) => {
            if (e.target.id === 'scrollArea' || e.target.id === 'driveView' || e.target.id === 'mainBody') {
                isDragging = true;
                document.body.classList.add('dragging-bg');
                startX = e.clientX - bgPosX;
                startY = e.clientY - bgPosY;
            }
        });

        window.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            bgPosX = e.clientX - startX;
            bgPosY = e.clientY - startY;
            document.body.style.backgroundPosition = `${bgPosX}px ${bgPosY}px`;
        });

        window.addEventListener('mouseup', () => {
            isDragging = false;
            document.body.classList.remove('dragging-bg');
            localStorage.setItem('bgX', bgPosX);
            localStorage.setItem('bgY', bgPosY);
        });

        // --- CORE FUNCTIONS ---
        function changeBG(e) {
            const file = e.target.files[0];
            const reader = new FileReader();
            reader.onload = (event) => {
                document.body.style.backgroundImage = `url(${event.target.result})`;
                localStorage.setItem('customBG', event.target.result);
            };
            reader.readAsDataURL(file);
        }

        function resetBG() {
            localStorage.removeItem('customBG');
            localStorage.removeItem('bgX');
            localStorage.removeItem('bgY');
            location.reload();
        }

        function navigate(target, cat = 'all', push = true, navEl = null) {
            const dv = document.getElementById('driveView');
            const av = document.getElementById('appView');
            const grid = document.getElementById('appGrid');
            const path = document.getElementById('pathDisp');

            document.getElementById('scrollArea').scrollTop = 0;

            if(navEl) {
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                navEl.classList.add('active');
            }

            if (target === 'root') {
                dv.classList.remove('hidden'); av.classList.add('hidden');
                path.innerText = "ğŸ“ This PC > Devices and drives";
            } else {
                dv.classList.add('hidden'); av.classList.remove('hidden');
                path.innerText = `ğŸ“ This PC > Apps > ${cat}`;
                grid.innerHTML = "";
                const filtered = cat === 'all' ? appDatabase : appDatabase.filter(a => a.cat === cat);
                filtered.forEach(app => {
                    grid.innerHTML += `<div class="item-card" onclick="openAppInOS('${app.url}','${app.label}','${app.icon}')">
                        <div class="item-icon">${app.icon}</div><div class="item-label">${app.label}</div>
                    </div>`;
                });
            }
            if (push) { historyStack.push({target, cat}); curIdx++; }
            updateBtns();
        }

        function openAppInOS(url, label, icon) {
            if (window.parent && typeof window.parent.launchApp === "function") {
                window.parent.launchApp(url, label, icon);
            } else { window.open(url, '_blank'); }
        }

        function goBack() { if(curIdx > 0) { curIdx--; let s = historyStack[curIdx]; navigate(s.target, s.cat, false); } }
        function updateBtns() { document.getElementById('btnBack').disabled = curIdx === 0; }
        function toggleStart() { const m = document.getElementById('startMenuPopup'); m.style.display = (m.style.display === 'block') ? 'none' : 'block'; }
        function toggleTheme() { document.body.classList.toggle('dark-mode'); localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light'); }

        function search(q) {
            if(q.length > 0) navigate('apps', 'all', false);
            document.querySelectorAll('.item-card').forEach(c => {
                c.style.display = c.innerText.toLowerCase().includes(q.toLowerCase()) ? 'flex' : 'none';
            });
        }

        // --- INIT LOAD ---
        window.onload = () => {
            const bg = localStorage.getItem('customBG');
            const x = localStorage.getItem('bgX');
            const y = localStorage.getItem('bgY');
            const theme = localStorage.getItem('theme');

            if(bg) document.body.style.backgroundImage = `url(${bg})`;
            if(x && y) { bgPosX = parseInt(x); bgPosY = parseInt(y); document.body.style.backgroundPosition = `${x}px ${y}px`; }
            if(theme === 'dark') document.body.classList.add('dark-mode');
        };

        window.onclick = (e) => { if (!e.target.closest('.start-btn') && !e.target.closest('#startMenuPopup')) document.getElementById('startMenuPopup').style.display = 'none'; };
    </script>
</body>
</html>

