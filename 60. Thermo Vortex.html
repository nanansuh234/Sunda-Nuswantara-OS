<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ancient Thermo-Siphon Vortex</title>
    <style>
        body {
            background: #111; color: #ffaa00; font-family: 'Courier New', monospace;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; margin: 0; overflow: hidden;
        }

        h1 { margin: 0; text-transform: uppercase; letter-spacing: 2px; color: #ff5500; text-shadow: 0 0 10px #ff5500; }
        
        .container {
            position: relative; width: 400px; height: 500px;
            margin-top: 20px;
        }

        /* YONI / GUCI */
        .vessel {
            position: absolute; top: 0; left: 50%; transform: translateX(-50%);
            width: 300px; height: 400px;
            border: 4px solid #888;
            border-radius: 40% 40% 60% 60%; /* Bentuk Telur */
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.05), rgba(0,0,0,0.8));
            overflow: hidden;
            box-shadow: inset 0 0 50px #000;
            z-index: 2;
        }

        /* API / DUPA DI BAWAH */
        .fire-pit {
            position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 150px; height: 80px;
            display: flex; justify-content: center; align-items: flex-end;
        }

        .flame {
            width: 20px; height: 20px; background: #ff5500;
            border-radius: 50% 50% 20% 20%;
            filter: blur(5px);
            animation: burn 0.5s infinite alternate;
            opacity: 0; transition: opacity 0.5s;
        }
        
        @keyframes burn { 
            0% { transform: scale(1) translateY(0); background: #ffaa00; } 
            100% { transform: scale(1.2) translateY(-10px); background: #ff3300; } 
        }

        canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

        .controls {
            margin-top: 20px; width: 400px; text-align: center;
            background: #222; padding: 15px; border-radius: 10px; border: 1px solid #444;
        }
        
        input[type=range] { width: 100%; accent-color: #ff5500; cursor: pointer; }

    </style>
</head>
<body>

    <h1>THERMO-SIPHON ENGINE</h1>
    <div style="font-size:0.8rem; color:#aaa;">Natural Circulation System (No Electricity)</div>

    <div class="container">
        <div class="vessel">
            <canvas id="fluidCanvas" width="300" height="400"></canvas>
            
            <div style="position:absolute; top:50px; left:140px; width:20px; height:300px; background:#444; border-radius:10px;"></div>
        </div>

        <div class="fire-pit" id="firePit">
            <div class="flame" style="animation-delay:0s"></div>
            <div class="flame" style="animation-delay:0.1s"></div>
            <div class="flame" style="animation-delay:0.2s"></div>
            <div class="flame" style="animation-delay:0.3s"></div>
            <div class="flame" style="animation-delay:0.4s"></div>
        </div>
    </div>

    <div class="controls">
        <label style="color:#ffaa00; font-weight:bold;">INTENSITAS API (Panas)</label>
        <input type="range" id="heatSlider" min="0" max="100" value="0" oninput="updateHeat(this.value)">
        <div style="font-size:0.8rem; color:#666; margin-top:5px;" id="statusTxt">MESIN DINGIN</div>
    </div>

    <script>
        const canvas = document.getElementById('fluidCanvas');
        const ctx = canvas.getContext('2d');
        const w = 300;
        const h = 400;
        const cx = w/2;
        const cy = h/2;

        let heatLevel = 0;
        let particles = [];

        // Init Particles
        for(let i=0; i<300; i++) {
            particles.push({
                angle: Math.random() * Math.PI * 2,
                radius: Math.random() * 100 + 20,
                y: Math.random() * h,
                speed: 0,
                temp: 0 // 0 = Dingin (Biru), 1 = Panas (Merah)
            });
        }

        function updateHeat(val) {
            heatLevel = parseInt(val);
            
            // Visual Api
            const flames = document.querySelectorAll('.flame');
            flames.forEach(f => {
                f.style.opacity = heatLevel / 100;
                f.style.height = (20 + (heatLevel * 0.5)) + 'px';
            });

            const st = document.getElementById('statusTxt');
            if(heatLevel > 80) st.innerText = "MAX VORTEX (PLASMA GENERATED)";
            else if(heatLevel > 20) st.innerText = "CIRCULATION ACTIVE";
            else st.innerText = "MESIN DINGIN";
        }

        function drawFluid() {
            ctx.clearRect(0, 0, w, h);

            particles.forEach(p => {
                // PHYSICS THERMO-SIPHON
                
                // 1. Pemanasan di Bawah
                if (p.y > 300 && heatLevel > 0) {
                    p.temp += 0.05 * (heatLevel/100); // Makin panas
                }
                
                // 2. Pendinginan di Atas
                if (p.y < 100) {
                    p.temp -= 0.02; // Makin dingin
                }
                
                // Clamp Temp 0-1
                if (p.temp > 1) p.temp = 1;
                if (p.temp < 0) p.temp = 0;

                // 3. Pergerakan Vertikal (Konveksi)
                // Panas = Naik, Dingin = Turun
                let buoyancy = (p.temp - 0.5) * 4; // Positif naik, negatif turun
                p.y -= buoyancy * (heatLevel/50);

                // 4. Pergerakan Spiral (Vortex)
                // Kalau panas (naik), dia kumpul ke tengah (pusat)
                // Kalau dingin (turun), dia nyebar ke pinggir (dinding)
                let targetRadius = p.temp > 0.5 ? 20 : 120;
                p.radius += (targetRadius - p.radius) * 0.02;

                // Rotasi
                let rotSpeed = (heatLevel / 1000) + 0.01;
                p.angle += rotSpeed;

                // Batas Y
                if (p.y < 20) p.y = 20; // Mentok atas
                if (p.y > 380) p.y = 380; // Mentok bawah

                // DRAW PARTICLE
                let px = cx + Math.cos(p.angle) * p.radius;
                let py = p.y;
                
                // Warna sesuai suhu: Merah (Hot) -> Ungu -> Biru (Cold)
                let r = p.temp * 255;
                let b = (1 - p.temp) * 255;
                let g = 50;

                ctx.fillStyle = `rgba(${r}, ${g}, ${b}, 0.8)`;
                
                let size = 2 + (p.temp * 3); // Panas = Mengembang
                ctx.beginPath(); ctx.arc(px, py, size, 0, Math.PI*2); ctx.fill();
            });
        }

        function animate() {
            drawFluid();
            requestAnimationFrame(animate);
        }

        animate();

    </script>
</body>
</html>