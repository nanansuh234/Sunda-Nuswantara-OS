<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jam Pasir Nusantara</title>
    <link rel="icon" type="image/png" href="https://nanansuh234.github.io/Sunda-Nuswantara-OS/favicon.png">
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Rajdhani:wght@600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #050505;
            --gold: #d4af37;
            --sand: #f1c40f;
            --glass: rgba(255, 255, 255, 0.1);
            --border: #333;
            --green: #2ea043;
        }

        body {
            background-color: var(--bg);
            color: #fff;
            font-family: 'Rajdhani', sans-serif;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            min-height: 100vh; margin: 0;
        }

        h1 {
            font-family: 'Cinzel', serif; color: var(--gold); letter-spacing: 2px;
            margin: 0 0 5px 0; text-align: center;
        }
        .subtitle { font-size: 0.9rem; color: #666; margin-bottom: 30px; }

        /* --- HOURGLASS VISUAL --- */
        .hourglass-frame {
            position: relative; width: 150px; height: 260px;
            margin-bottom: 30px;
        }

        .glass-top, .glass-bottom {
            position: absolute; left: 50%; transform: translateX(-50%);
            width: 140px; height: 120px;
            background: var(--glass);
            border: 4px solid var(--gold);
            overflow: hidden;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.1);
        }

        .glass-top {
            top: 0; clip-path: polygon(0% 0%, 100% 0%, 55% 100%, 45% 100%);
            border-bottom: none; border-radius: 10px 10px 0 0;
        }
        
        .glass-bottom {
            bottom: 0; clip-path: polygon(45% 0%, 55% 0%, 100% 100%, 0% 100%);
            border-top: none; border-radius: 0 0 10px 10px;
        }

        .sand-top {
            position: absolute; bottom: 0; left: 0; width: 100%;
            background: var(--sand); height: 100%; transition: height 0.1s linear;
        }
        .sand-top::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 10px;
            background: rgba(0,0,0,0.2); transform: scaleY(0.5);
        }

        .sand-bottom {
            position: absolute; bottom: 0; left: 0; width: 100%;
            background: var(--sand); height: 0%; transition: height 0.1s linear;
            border-radius: 0 0 50% 50%;
        }
        .sand-bottom::before {
            content: ''; position: absolute; top: -10px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0;
            border-left: 20px solid transparent; border-right: 20px solid transparent;
            border-bottom: 15px solid var(--sand); opacity: 0; transition: opacity 0.3s;
        }
        .active .sand-bottom::before { opacity: 1; }

        .stream {
            position: absolute; top: 118px; left: 50%; transform: translateX(-50%);
            width: 3px; height: 24px; background: var(--sand); opacity: 0; z-index: 10;
        }
        .active .stream { opacity: 1; animation: flow 0.5s infinite; }

        @keyframes flow {
            0% { height: 24px; opacity: 0.8; }
            50% { height: 26px; opacity: 1; }
            100% { height: 24px; opacity: 0.8; }
        }

        /* --- CONTROLS --- */
        .control-panel {
            background: #111; padding: 25px; border: 1px solid var(--border);
            border-radius: 12px; text-align: center; width: 320px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .input-wrapper {
            margin-bottom: 15px; border-bottom: 1px dashed #333; padding-bottom: 15px;
        }

        .input-group { display: flex; gap: 10px; justify-content: center; align-items: center; }
        
        input {
            width: 80px; padding: 10px; background: #000; border: 1px solid #444;
            color: var(--gold); font-size: 1.5rem; text-align: center; font-weight: bold;
            border-radius: 5px; font-family: 'Rajdhani', sans-serif;
        }
        input:focus { outline: none; border-color: var(--gold); }
        
        button {
            padding: 10px 20px; background: var(--gold); border: none; font-weight: bold;
            cursor: pointer; font-family: 'Cinzel', serif; font-size: 1rem; border-radius: 5px;
            color: #000; transition: 0.3s;
        }
        button:hover { background: #f1c40f; }
        button.btn-reset { background: #333; color: #fff; }
        button.btn-reset:hover { background: #c0392b; }

        .conv-text {
            font-size: 0.85rem; color: var(--green); margin-top: 8px; font-style: italic;
            height: 1.2em; /* Keep layout stable */
        }

        /* DIGITAL CLOCKS */
        .clock-container { margin-top: 15px; }
        
        .display-main {
            font-size: 3rem; font-weight: bold; line-height: 1;
            text-shadow: 0 0 15px rgba(212, 175, 55, 0.3); color: #fff;
        }
        .label-main { font-size: 0.8rem; color: var(--gold); letter-spacing: 2px; text-transform: uppercase; }

        .display-sub {
            font-size: 1.2rem; color: #666; margin-top: 5px; font-family: monospace;
        }

    </style>
</head>
<body>

    <h1>JAM PASIR NUSANTARA</h1>
    <div class="subtitle">Time Dilation: 1 Menit Nu = 90 Detik Masehi</div>

    <div class="hourglass-frame" id="hourglass">
        <div class="glass-top"><div class="sand-top" id="sandTop"></div></div>
        <div class="stream" id="sandStream"></div>
        <div class="glass-bottom"><div class="sand-bottom" id="sandBottom"></div></div>
    </div>

    <div class="control-panel">
        
        <div class="input-wrapper">
            <div style="font-size:0.75rem; color:#888; margin-bottom:5px; text-transform:uppercase;">Input Durasi (Menit Nusantara)</div>
            <div class="input-group">
                <input type="number" id="inputMin" value="1" min="1" max="60" oninput="updateConversion()">
                <button onclick="startTimer()">MULAI</button>
                <button class="btn-reset" onclick="resetTimer()">â†º</button>
            </div>
            <div class="conv-text" id="convText">Setara: 1 Menit 30 Detik (Masehi)</div>
        </div>

        <div class="clock-container">
            <div class="label-main">WAKTU NUSANTARA</div>
            <div class="display-main" id="displayNu">00:00</div>
            <div class="display-sub" id="displayReal">Masehi: 00:00</div>
        </div>

    </div>

    <script>
        let timerInterval;
        let totalSecondsReal = 0; // Total detik Masehi
        let remainingSecondsReal = 0; // Sisa detik Masehi
        let isRunning = false;

        const sandTop = document.getElementById('sandTop');
        const sandBottom = document.getElementById('sandBottom');
        const hourglass = document.getElementById('hourglass');
        const dispNu = document.getElementById('displayNu');
        const dispReal = document.getElementById('displayReal');
        const inputField = document.getElementById('inputMin');

        // Logic: 1 Menit Nusantara = 1.5 Menit Masehi = 90 Detik Masehi
        const RATIO = 1.5; 

        function updateConversion() {
            const val = parseFloat(inputField.value) || 0;
            const totalRealSec = val * 60 * RATIO;
            
            const m = Math.floor(totalRealSec / 60);
            const s = Math.floor(totalRealSec % 60);
            
            document.getElementById('convText').innerText = `Setara: ${m} Menit ${s} Detik (Masehi)`;
        }

        function startTimer() {
            if (isRunning) return;

            const nusMinutes = parseFloat(inputField.value);
            if (!nusMinutes || nusMinutes <= 0) return;

            // Hitung Total Detik Masehi (Real Time)
            totalSecondsReal = nusMinutes * 60 * RATIO;
            remainingSecondsReal = totalSecondsReal;

            isRunning = true;
            hourglass.classList.add('active');
            inputField.disabled = true;
            
            updateDisplays();
            
            timerInterval = setInterval(() => {
                remainingSecondsReal--; // Kurangi 1 detik real time (Masehi)
                
                updateDisplays();
                updateSandVisual();

                if (remainingSecondsReal <= 0) {
                    finishTimer();
                }
            }, 1000); 
        }

        function updateSandVisual() {
            const percentRemaining = (remainingSecondsReal / totalSecondsReal) * 100;
            const percentFilled = 100 - percentRemaining;
            sandTop.style.height = percentRemaining + "%";
            sandBottom.style.height = percentFilled + "%";
        }

        function updateDisplays() {
            // 1. TAMPILAN MASEHI (REAL TIME)
            const mReal = Math.floor(remainingSecondsReal / 60);
            const sReal = Math.floor(remainingSecondsReal % 60);
            dispReal.innerText = `Masehi: ${pad(mReal)}:${pad(sReal)}`;

            // 2. TAMPILAN NUSANTARA (TIME DILATION)
            // Sisa Detik Nusantara = Sisa Detik Masehi / 1.5
            const remainingSecondsNu = remainingSecondsReal / RATIO;
            
            // Konversi ke format Menit:Detik
            // Note: Karena dibagi 1.5, detiknya bisa desimal, kita floor aja biar rapi ala jam digital
            const mNu = Math.floor(remainingSecondsNu / 60);
            const sNu = Math.floor(remainingSecondsNu % 60);
            
            dispNu.innerText = `${pad(mNu)}:${pad(sNu)}`;
        }

        function pad(num) {
            return String(num).padStart(2, '0');
        }

        function finishTimer() {
            clearInterval(timerInterval);
            isRunning = false;
            hourglass.classList.remove('active');
            dispNu.innerText = "SELESAI";
            dispNu.style.color = "#2ea043"; // Hijau
            dispReal.innerText = "Masehi: 00:00";
            inputField.disabled = false;
            
            // Beep Sound
            const context = new (window.AudioContext || window.webkitAudioContext)();
            const osc = context.createOscillator();
            osc.type = 'square';
            osc.frequency.value = 440;
            osc.connect(context.destination);
            osc.start();
            setTimeout(() => osc.stop(), 800);
        }

        function resetTimer() {
            clearInterval(timerInterval);
            isRunning = false;
            hourglass.classList.remove('active');
            inputField.disabled = false;
            
            remainingSecondsReal = 0;
            dispNu.innerText = "00:00";
            dispNu.style.color = "#fff";
            dispReal.innerText = "Masehi: 00:00";

            sandTop.style.height = "100%";
            sandBottom.style.height = "0%";
            updateConversion();
        }

        // Init Text
        updateConversion();
    </script>

</body>
</html>